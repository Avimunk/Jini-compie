function Config(a,b,c){console.log("Config"),b.otherwise("/"),a.state("home",{cache:!0,url:"/",controller:"HomeController",templateUrl:"templates/categories/8.html",resolve:{categories:["CategoryService","$stateParams",function(a,b){return console.log("CALL: resolve.categories1"),a.getCategories(b)}],setScope:["$rootScope","$state","$stateParams","categories","setScopeService",function(a,b,c,d,e){return console.log("CALL: resolve.setScope1"),e.init(a,b,c,d)}]}}).state("searchInCategory",{cache:!0,url:"/{id:[1-9][0-9]*}/{title:.*?}/search/{search:.+}",controller:"SearchController",templateUrl:"templates/categories/8.html",resolve:{categories:["CategoryService","$stateParams",function(a,b){return console.log("CALL: resolve.categories5"),a.getCategories(b)}],setScope:["$rootScope","$state","$stateParams","categories","setScopeService",function(a,b,c,d,e){return console.log("CALL: resolve.setScope5"),e.init(a,b,c,d)}]}}).state("category",{cache:!0,url:"/{id:[1-9][0-9]*}/{title:.*}",controller:"CategoryController",templateUrl:"templates/categories/8.html",resolve:{categories:["CategoryService","$stateParams",function(a,b){return console.log("CALL: resolve.categories2"),a.getCategories(b)}],setScope:["$rootScope","$state","$stateParams","categories","setScopeService",function(a,b,c,d,e){return console.log("CALL: resolve.setScope2"),e.init(a,b,c,d)}]}}).state("object",{cache:!0,url:"/{id:[0-9][0-9]*}-{id2:[1-9][0-9]*}{map:(?:/map)?}/{title:.*}/{title2:.*}",controller:"CategoryController",templateUrl:"templates/categories/8.html",resolve:{categories:["CategoryService","$stateParams",function(a,b){return console.log("CALL: resolve.categories3"),a.getCategories(b)}],setScope:["$rootScope","$state","$stateParams","categories","setScopeService",function(a,b,c,d,e){return console.log("CALL: resolve.setScope3"),e.init(a,b,c,d)}],object:["$stateParams","objectService","setScope","$rootScope",function(a,b,c,d){return console.log("CALL: resolve.object3",c),d.currentItem=!1,b.getObjectData(a).then(function(a){return a.type="object",d.openItem(a,"object"),!0})}]}}).state("search",{cache:!0,url:"/search/{search:.+}",controller:"SearchController",templateUrl:"templates/categories/8.html",resolve:{categories:["CategoryService","$stateParams",function(a,b){return console.log("CALL: resolve.categories4"),a.getCategories(b)}],setScope:["$rootScope","$state","$stateParams","categories","setScopeService",function(a,b,c,d,e){return console.log("CALL: resolve.setScope4"),e.init(a,b,c,d)}]}})}function Run(a,b,c,d,e,f){a.$on("$stateChangeStart",function(a,b){})}function CategoryController(a,b,c,d,e){console.log("CategoryControllerLoaded. ID:",c.id),console.log("CategoryController",d.current),b.currentID=c.id,a.showObjectBlockMap=!1,c.map&&(console.log("$stateParams.map",c.map),a.showObjectBlockMap=!0)}function HomeController(a,b){console.log("HomeController!"),a.pie=b}function MainController(a,b,c,d,e,f,g,h){console.log("MainController"),b.siteUrl="/Jini3/#",b.mediaUrl="http://ec2-52-27-196-120.us-west-2.compute.amazonaws.com/uploads/";var i=[];b.$on("$locationChangeSuccess",function(){i.push(f.$$path)}),b.back=function(){var a=i.length>1?i.splice(-2)[0]:"/";f.path(a),i=[]},b.pie=c,b.fixPie=function(){d.init(b.currentCategoriesLength,b.isFirst)},b.setMapWidth=function(a){var c=window.innerWidth;1627>c&&c>980&&(b.set_map_width=c-10-365-80-70,a&&b.$digest())},b.setMapWidth(!1),angular.element(h).bind("resize",function(){b.setMapWidth(!0)}),b.centerImage="../img/no_selector.png",b.imageOn=function(a){b.centerImage=a.featuredImageUrl},b.imageOff=function(){b.centerImage="../img/no_selector.png"};var j=[],k=[],l=[];b.showCategoryBlock=!1,b.showObjectBlock=!1,b.showCategoriesBlock=!1;var m=!1;b.openItem=function(c,d){if("search"==a.current.name||"searchInCategory"==a.current.name&&"object"!=d)return b.displayHandle.closeAll(),!1;if(b.showCategorySearchBlock=g.showSearchBlock=b.top_search_result=b.center_search_result=b.category_search_result=!1,m=!0,setTimeout(function(){m=!1},500),console.log("openItem",c),!Object.keys(c).length)return void b.leftBlocksHandler.homePageView();switch(c.type){case"object":b.leftBlocksHandler.objectView(c);break;case"category":console.log("case 'category':",c,c.items_count),c.items_count?b.leftBlocksHandler.categoryHover(c,!0):b.leftBlocksHandler.categoryList(c)}},b.leftBlocksHandler={categoryHover:function(c,d){return"search"==a.current.name||"searchInCategory"==a.current.name?(b.displayHandle.closeAll(),!1):"undefined"==typeof d&&m?!1:(b.displayHandle.showCategoryOrHomePage(),void b.showCategoryHover(c))},categoryList:function(a){b.displayHandle.showCategoryList(),b.showCategoryList(a)},objectView:function(a){b.displayHandle.showObject(),b.showObject(a)},homePageView:function(){b.displayHandle.showCategoryOrHomePage(),b.showHomePageBlock()}},b.displayHandle={showCategoryOrHomePage:function(){console.log("showCategoryOrHomePage"),b.showCategoriesBlock=!1,b.showCategoryBlock=!0,b.showObjectBlock=!1},showCategoryList:function(){console.log("showCategoryList"),b.showCategoriesBlock=!0,b.showCategoryBlock=!1,b.showObjectBlock=!1,b.showCategoriesBlockList||b.showCategoriesBlockMap||(b.showCategoriesBlockList=!0)},showObject:function(){console.log("showObject"),b.showCategoriesBlock=!1,b.showCategoryBlock=!1,b.showObjectBlock=!0},closeAll:function(){console.log("closeAll"),b.showCategoryBlock=b.showObjectBlock=b.showCategoriesBlock=!1}},b.showCategoryHover=function(a){var c=a.id;j[c]?b.sideCategory=j[c]:(b.sideCategory=j[c]={id:c,title:a.title,img:a.contentImageUrl,items_count:a.items_count?!0:!1,content:!1},e.get("/Jini3/public/categories/"+c+"/content").then(function(a){b.sideCategory.content=j[c].content=a.data}))},b.showCategoryList=function(a){var c=a.id;k[c]?b.sideCategories=k[c]:e.get("/Jini3/public/objects/search?categoryid="+c+"&index=100").then(function(a){b.sideCategories=k[c]=a})},b.showObject=function(a){var c=a.id;l[c]?b.sideObject=l[c]:l[c]=b.sideObject=a,setTimeout(function(){b.$broadcast("rebuild:me"),console.log("rebuild:me")},500)},b.a=[],b.a.length=50,b.showHomePageBlock=function(){b.displayHandle.showCategoryOrHomePage(),j[0]?b.sideCategory=j[0]:b.sideCategory=j[0]={id:"0",title:"Home page",img:!1,content:"This is the home page example data!"}},b.closeOnMouseover=function(){return m?!1:void((b.showCategoriesBlock||b.showObjectBlock)&&b.displayHandle.closeAll())},b.showCategoriesMap=function(){return b.showCategoriesBlock?b.showCategoriesBlockMap?!0:(b.showCategoriesBlockList=!1,void(b.showCategoriesBlockMap=!0)):!1},b.showCategoriesList=function(){return b.showCategoriesBlock?b.showCategoriesBlockList?!0:(b.showCategoriesBlockList=!0,void(b.showCategoriesBlockMap=!1)):!1};var n,o="/Jini3/public/objects/search?query=",p="/Jini3/public/objects/searchPage?query=",q=!1,r={page:[],regular:[]};b.search=function(){return q&&clearTimeout(n),q=!0,n=setTimeout(function(){console.log(g.keywords),"search"==a.current.name?(b.top_search_result=!1,r.page[g.keywords]?b.center_search_result=r.page[g.keywords]:e.get(p+g.keywords).then(function(a){r.page[g.keywords]=b.center_search_result=a.data})):"searchInCategory"==a.current.name?(b.top_search_result=b.center_search_result=!1,r.page[g.keywords+"|"+a.params.id]?b.category_search_result=r.page[g.keywords+"|"+a.params.id]:e.get(p+g.keywords+"&categoryid="+a.params.id).then(function(c){r.page[g.keywords+"|"+a.params.id]=b.category_search_result=c.data})):(r.regular[g.keywords]?b.top_search_result=r.page[g.keywords]:e.get(o+g.keywords).then(function(a){r.page[g.keywords]=b.top_search_result=a.data}),b.$broadcast("rebuild:search"),console.log("rebuild:search")),q=!1},500),!1},b.clearSearch=function(){g.keywords=null,b.top_search_result=!1},b.changeUrl=function(){return"search"==a.current.name?g.keywords.length>=1&&f.path("/search/"+g.keywords):"searchInCategory"==a.current.name?g.keywords.length>=1&&f.path("/"+a.params.id+"/"+a.params.title+"/search/"+g.keywords):b.search(),!1},b.showCategoriesSearchMap=function(){return console.log("clicked!showCategoriesSeacrhMap"),b.showCategorySearchBlock?b.showCategoriesSearchBlockMap?!0:(b.showCategoriesSearchBlockList=!1,void(b.showCategoriesSearchBlockMap=!0)):!1},b.showCategoriesSearchList=function(){return console.log("clicked!showCategoriesList"),b.showCategorySearchBlock?b.showCategoriesSearchBlockList?!0:(b.showCategoriesSearchBlockList=!0,void(b.showCategoriesSearchBlockMap=!1)):!1}}function SearchController(a,b,c){console.log("SearchControllerLoaded. ID:"),b.keywords=a.search=c.search,a.currentID=c.id||0,a.currentID?(b.showCategorySearchBlock=!0,a.showSearchBlock=!1):(a.showSearchBlock=!0,b.showCategorySearchBlock=!1),b.search()}function setScopeService(){return{init:function(a,b,c,d){console.log("CALL: setScopeService");var e=c.id||0;a.currentBreadCrumbs=d.breadcrumbs[e];var f=d.parents[e];return d.categories.length&&"undefined"==typeof f&&b.go("home"),a.currentCategories=getCategoriesByParentArray(d.categories,f.slice()),a.currentCategoriesLength=Object.keys(a.currentCategories).length,console.log("$rootScope.currentCategories:",a.currentCategories),a.currentItem=getCurrentCategoryByParentArray(d.categories,f.slice()),0!=e&&(a.currentItem.type="category"),console.log("$rootScope.currentItem",a.currentItem),0==f.length?a.parentID=null:f.length<=1?a.parentID=0:a.parentID=f[f.length-2],a.currentCategories=splitCurrentCategoriesTitle(a.currentCategories),!0}}}function CategoryService(a,b,c){var d={};return d.getCategories=function(e){if(c.isFirst=!1,d.categoriesData)return d.categoriesData;var f=e.id||0;return d.categoriesData=a.get("/Jini3/public/categories/"+f+"/categories").then(function(a){return("undefined"==typeof a.data.parents||"undefined"==typeof a.data.parents[f])&&b.go("home"),c.isFirst=!0,a.data})},d}function objectService(a){var b={};return b.objectData=[],b.getObjectData=function(c){var d=c.id2||0;return b.objectData[d]?b.objectData[d]:b.objectData[d]=a.get("/Jini3/public/objects/"+d).then(function(a){return console.log(a.data),a.data})},b}function fixPie(a){return{init:function(a,b){this.rotateCircle(a),this.rotateImage(a),b&&this.openCircle(a)},rotateCircle:function(b){var c=!1;switch(b){case 3:c=-30;break;case 4:c=-45;break;case 5:c=-55;break;case 6:c=-60;break;case 7:c=-65;break;case 8:c=-67;break;case 9:c=-70;break;case 10:c=-71}c&&TweenLite.set(a[0].querySelector("#menu"),{rotation:c,transformOrigin:"50% 50%"})},rotateImage:function(b){var c=!1;switch(b){case 2:c=-0;break;case 3:c=30;break;case 5:c=55;break;case 4:c=45;break;case 6:c=60;break;case 7:c=65;break;case 8:c=67;break;case 9:c=70;break;case 10:c=71}c&&TweenLite.set(a[0].querySelector("#featuredImage"),{rotation:c,transformOrigin:"50% 50%"})},openCircle:function(b){var c=b,d=a[0].querySelector("#menu"),e=d.querySelectorAll(".item"),f=360/c,g=new TimelineLite;g.to(e,.2,{scale:1,ease:Back.easeOut.config(4)},.05);for(var h=0;h<e.length;h++)g.to(e[h],.7,{rotation:-h*f+"deg"},.35);setTimeout(function(){for(var a=0;a<e.length;a++)e[a].querySelectorAll(".sector")[0].style.opacity="0.8",e[a].querySelectorAll(".sector")[0].style.transition="all .2s linear"},1e3)}}}function pie(){return{2:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 0.03084187958484108,246.07317067204482 l134.9833453850242,2.1204878370957942 A115,115 0 0,1 365,250",x:"280.0154113769531",y:"178.03659057617188"},transform_a:["rotate(0 250 250)","rotate(-180 250 250)"],transform_b:["rotate(0 300.0154113769531 198.03659057617188)","rotate(180 250.0154113769531 80.03659057617188)"]},3:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 127.27406159621479,32.196547219952635 l66.272006738044,117.61386450122558 A115,115 0 0,1 365,250",x:"339.0684509277344",y:"77.48664855957031"},transform_a:["rotate(0 250 250)","rotate(-120 250 250)","rotate(-240 250 250)"],transform_b:["rotate(30 359.0684509277344 97.48664855957031)","rotate(-140 359.0684509277344 97.48664855957031)","rotate(-140 359.0684509277344 97.48664855957031)"]},4:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 251.96347522217783,0.007710588802581242 l-1.0602766199760367,134.9958362820466 A115,115 0 0,1 365,250",x:"355.98175048828125",y:"105.00385284423828"},transform_a:["rotate(0 250 250)","rotate(-90 250 250)","rotate(-180 250 250)","rotate(-270 250 250)"],transform_b:["rotate(45 375.98175048828125 125.00385284423828)","rotate(45 375.98175048828125 125.00385284423828)","rotate(-135 375.98175048828125 125.00385284423828)","rotate(45 375.98175048828125 125.00385284423828)"]},5:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 328.7466299138262,12.725963752426338 l-42.52318015346617,128.12797957368977 A115,115 0 0,1 365,250",x:"382.0361633300781",y:"120.26736450195312"},transform_a:["rotate(0 250 250)","rotate(-72 250 250)","rotate(-144 250 250)","rotate(-216 250 250)","rotate(-288 250 250)"],transform_b:["rotate(55 402.0361633300781 140.26736450195312)","rotate(55 402.0361633300781 140.26736450195312)","rotate(-125 402.0361633300781 140.26736450195312)","rotate(-125 402.0361633300781 140.26736450195312)","rotate(55 402.0361633300781 140.26736450195312)"]},6:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 376.1319059537548,34.151112348307095 l-68.1112292150276,116.55839933191416 A115,115 0 0,1 365,250",x:"392.6246337890625",y:"136.67543029785156"},transform_a:["rotate(0 250 250)","rotate(-60 250 250)","rotate(-120 250 250)","rotate(-180 250 250)","rotate(-240 250 250)","rotate(-300 250 250)"],transform_b:["rotate(60 412.6246337890625 156.67543029785156)","rotate(60 412.6246337890625 156.67543029785156)","rotate(-120 412.6246337890625 156.67543029785156)","rotate(-120 412.6246337890625 156.67543029785156)","rotate(-120 412.6246337890625 156.67543029785156)","rotate(60 412.6246337890625 156.67543029785156)"]},7:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 406.7480905992045,55.243649414188354 l-84.64396892357041,105.16842931633829 A115,115 0 0,1 365,250",x:"399.1138000488281",y:"149.02609252929688"},transform_a:["rotate(0 250 250)","rotate(-51.42857142857143 250 250)","rotate(-102.85714285714286 250 250)","rotate(-154.28571428571428 250 250)","rotate(-205.71428571428572 250 250)","rotate(-257.14285714285717 250 250)","rotate(-308.57142857142856 250 250)"],transform_b:["rotate(65 419.1138000488281 169.02609252929688)","rotate(65 419.1138000488281 169.02609252929688)","rotate(-115 419.1138000488281 169.02609252929688)","rotate(-115 419.1138000488281 169.02609252929688)","rotate(-115 419.1138000488281 169.02609252929688)","rotate(-115 419.1138000488281 169.02609252929688)","rotate(65 419.1138000488281 169.02609252929688)"]},8:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 427.4695309138226,73.91886643587344 l-95.8335466934642,95.08381212462837 A115,115 0 0,1 365,250",x:"403.3679504394531",y:"158.58712768554688"},transform_a:["rotate(0 250 250)","rotate(-45 250 250)","rotate(-90 250 250)","rotate(-135 250 250)","rotate(-180 250 250)","rotate(-225 250 250)","rotate(-270 250 250)","rotate(-315 250 250)"],transform_b:["rotate(67 423.3679504394531 178.58712768554688)","rotate(67 423.3679504394531 178.58712768554688)","rotate(67 423.3679504394531 178.58712768554688)","rotate(-115 423.3679504394531 178.58712768554688)","rotate(-115 423.3679504394531 178.58712768554688)","rotate(-115 423.3679504394531 178.58712768554688)","rotate(67 423.3679504394531 178.58712768554688)","rotate(67 423.3679504394531 178.58712768554688)"]},9:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 442.0708808983809,89.97257512876115 l-103.71827568512572,86.41480943046898 A115,115 0 0,1 365,250",x:"406.30401611328125",y:"166.1788330078125"},transform_a:["rotate(0 250 250)","rotate(-40 250 250)","rotate(-80 250 250)","rotate(-120 250 250)","rotate(-160 250 250)","rotate(-200 250 250)","rotate(-240 250 250)","rotate(-280 250 250)","rotate(-320 250 250)"],transform_b:["rotate(70 426.30401611328125 186.1788330078125)","rotate(70 426.30401611328125 186.1788330078125)","rotate(70 426.30401611328125 186.1788330078125)","rotate(-115 426.30401611328125 186.1788330078125)","rotate(-115 426.30401611328125 186.1788330078125)","rotate(-115 426.30401611328125 186.1788330078125)","rotate(-115 426.30401611328125 186.1788330078125)","rotate(70 426.30401611328125 186.1788330078125)","rotate(70 426.30401611328125 186.1788330078125)"]},10:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 452.71489520809337,103.6898114936225 l-109.46604341237042,79.00750179344385 A115,115 0 0,1 365,250",x:"408.41387939453125",y:"172.33949279785156"},transform_a:["rotate(0 250 250)","rotate(-36 250 250)","rotate(-72 250 250)","rotate(-108 250 250)","rotate(-144 250 250)","rotate(-180 250 250)","rotate(-216 250 250)","rotate(-252 250 250)","rotate(-288 250 250)","rotate(-324 250 250)"],transform_b:["rotate(72 428.41387939453125 192.33949279785156)","rotate(72 428.41387939453125 192.33949279785156)","rotate(72 428.41387939453125 192.33949279785156)","rotate(-109 428.41387939453125 192.33949279785156)","rotate(-109 428.41387939453125 192.33949279785156)","rotate(-109 428.41387939453125 192.33949279785156)","rotate(-109 428.41387939453125 192.33949279785156)","rotate(72 428.41387939453125 192.33949279785156)","rotate(72 428.41387939453125 192.33949279785156)","rotate(72 428.41387939453125 192.33949279785156)"]}}}function split2s(a,b){var c=a.indexOf(b);return-1!==c?[a.substring(0,c),a.substring(c+1)]:[a]}function replaceAll(a,b,c){return c.replace(new RegExp(a,"g"),b)}function splitCurrentCategoriesTitle(a){for(i in a){var b=replaceAll("/","",a[i].title);b=replaceAll("-","",b);var c=split2s(b," ");a[i].newTitle=c.length>1?c:!1}return a}function getCategoriesByParentArray(a,b){if(0!=b.length){var c=b[0];b.shift(),a[c].items_count&&(a=getCategoriesByParentArray(a[c].items,b))}return a}function getCurrentCategoryByParentArray(a,b){if(1==b.length)currentCategory={id:b[0],title:a[b[0]].title,contentImageUrl:a[b[0]].contentImageUrl,items_count:a[b[0]].items_count?!0:!1,contetnt:!1};else if(0==b.length)currentCategory={};else{var c=b[0];b.shift(),currentCategory=getCurrentCategoryByParentArray(a[c].items,b)}return currentCategory}function getCategoriesByParentArray2(a,b){if(0!=b.length)for(var c=0;c<a.length;c++)if(a[c].id==b[0]){if(b.shift(),!a[c].items_count)break;a=getCategoriesByParentArray(a[c].items,b)}return a}String.prototype.trunc=function(a,b){var c=this.length>a,d=c?this.substr(0,a-1):this;return d=b&&c?d.substr(0,d.lastIndexOf(" ")):d,c?d+"&hellip;":d},angular.module("JINI",["ui.router","ngStorage","ngMessages","ngAnimate","ngTinyScrollbar","JINI.controllers","JINI.directives","JINI.filters","JINI.services","JINI.templates"]).config(Config).run(Run),Config.$inject=["$stateProvider","$urlRouterProvider","$localStorageProvider"],Run.$inject=["$rootScope","$state","$localStorage","$sessionStorage","$window","$http"],angular.module("JINI.controllers",[]),angular.module("JINI.controllers").controller("CategoryController",["$rootScope","$scope","$stateParams","$state","$http",CategoryController]),angular.module("JINI.controllers").controller("HomeController",["$scope","pie",HomeController]),angular.module("JINI.controllers").controller("MainController",MainController),MainController.$inject=["$state","$rootScope","pie","fixPie","$http","$location","$scope","$window"],angular.module("JINI.controllers").controller("SearchController",["$scope","$rootScope","$stateParams",SearchController]),angular.module("JINI.directives",[]).directive("categoryhover",function(){return{restrict:"EA",replace:!0,templateUrl:"templates/directives/categoryHover.html"}}).directive("objectblock",function(){return{restrict:"EA",replace:!0,templateUrl:"templates/directives/objectBlock.html"}}).directive("categoriesblock",function(){return{restrict:"EA",replace:!0,templateUrl:"templates/directives/categoriesBlock.html"}}).directive("categoriesSearchBlock",function(){return{restrict:"EA",replace:!0,templateUrl:"templates/directives/categoriesBlockSearch.html"}}).directive("categoryMap",["$http",function(a){var b=[],c=function(c,d,e){function f(){void 0===i&&(i=new google.maps.Map(d[0],l))}function g(a,b,c,d){var e=new google.maps.Marker({map:i,position:a,animation:google.maps.Animation.DROP});c&&e.setIcon(c),""!=b&&"undefined"!=typeof b&&(e.info=b,k.push(e),google.maps.event.addListener(e,"click",function(){void 0!==j&&j.close(),j=new InfoBubble({map:i,content:e.info,padding:0,backgroundColor:"white",borderColor:"transparent",backgroundClassName:"infoBubbleBlock",minHeight:d?"370":"130",maxHeight:d?"370":"130",minWidth:"450",maxWidth:"450",borderRadius:0,borderWidth:0,arrowSize:20,arrowPosition:30,arrowStyle:2,shadowStyle:0,closeSrc:"/Jini3/images/icons/close-white-bg.png"}),j.open(i,e)}))}function h(a){for(var b=0;b<a.data.length;b++){var d=a.data[b];1==d.promoted?iconUrl="/Jini3/public/img/icons/map_pin_promoted_xs.png":iconUrl="/Jini3/public/img/icons/map_pin_xs.png";var e='<div class="marker-popup'+(d.content_image?"  content-image":" no-content-image")+'"><div class="top-pane" style="background-image: url('+d.content_image+');"></div>   <div class="main-pane">       <div class="row heading">           <a href="#/'+c.currentItem.id+"-"+d.id+"/"+c.currentItem.title+"/"+d.title+'" class="col-md-12">               <h2 class="title">'+d.title.trunc(40,!0)+'</h2>           </a>       </div>       <div class="row heading">           <div class="col-md-12">               <div class="content">'+d.excerpt.trunc(85,!0)+'</div>           </div>       </div>       <div class="row actions actions-pane">           <div class="pull-left"><span class="address">'+d.address_street+" "+d.address_city+"</span></div>       </div>   </div></div></div>";g(new google.maps.LatLng(d.geo_latitude,d.geo_longitude),e,iconUrl,d.content_image?!0:!1)}}var i,j,k=[],l={center:new google.maps.LatLng(32.0713513,34.8798235,9),zoom:10,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0,scrollwheel:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER,style:google.maps.ZoomControlStyle.LARGE}};f();var m=c.currentItem.id;console.log(c.search,typeof c.search);var n="undefined"!=typeof c.search&&"function"!=typeof c.search?c.search:"";b[m+n]?h(b[m+n]):a.get("/Jini3/public/objects/locations?categoryid="+m+(n?"&query="+n:"")).then(function(a){console.log("getMapData",a.data),b[m+n]=a.data,console.log(b[m+n]),h(b[m+n])})};return{restrict:"EA",template:'<div id="gmaps" style="width: 1178px; height: 980px;"></div>',replace:!0,link:c}}]).directive("objectMap",["$http",function(a){var b=function(a,b,c){function d(){void 0===f&&(f=new google.maps.Map(b[0],i))}function e(b,c,d){var e=new google.maps.Marker({map:f,position:b,animation:google.maps.Animation.DROP});d&&e.setIcon(d),""!=c&&"undefined"!=typeof c&&(e.info=c,h.push(e),g=new InfoBubble({map:f,content:e.info,padding:0,backgroundColor:"white",borderColor:"transparent",backgroundClassName:"infoBubbleBlock",minHeight:a.sideObject.content_image?"370":"130",maxHeight:a.sideObject.content_image?"370":"130",minWidth:"450",maxWidth:"450",borderRadius:0,borderWidth:0,arrowSize:20,arrowPosition:30,arrowStyle:2,shadowStyle:0,closeSrc:"/Jini3/images/icons/close-white-bg.png"}),g.open(f,e),google.maps.event.addListener(e,"click",function(){g.open(f,e)}))}console.log("objectMap",c);var f,g,h=[],i={center:new google.maps.LatLng(32.0713513,34.8798235,9),zoom:10,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0,scrollwheel:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER,style:google.maps.ZoomControlStyle.LARGE}};if(d(),a.sideObject.address_location_g&&a.sideObject.address_location_k){console.log("mapItem"),1==a.sideObject.promoted?iconUrl="/Jini3/public/img/icons/map_pin_promoted_xs.png":iconUrl="/Jini3/public/img/icons/map_pin_xs.png";var j='<div class="marker-popup'+(a.sideObject.content_image?" content-image":" no-content-image")+'"><div class="top-pane" style="background-image: url('+a.sideObject.content_image+');"></div>   <div class="main-pane">       <div class="row heading">           <a href="#/0-'+a.sideObject.id+"/Home/"+a.sideObject.title+'" class="col-md-12">               <h2 class="title">'+a.sideObject.title.trunc(40,!0)+'</h2>           </a>       </div>       <div class="row heading">           <div class="col-md-12">               <div class="content">'+(a.sideObject.excerpt+" Lorem Ipsum is simply dummy text of the printing Lorem Ipsum is simply dummy text of the printing Lorem Ipsum is simply dummy text of the printing").trunc(85,!0)+'</div>           </div>       </div>       <div class="row actions actions-pane">           <div class="pull-left"><span class="address">'+a.sideObject.address_street+" "+a.sideObject.address_city+"</span></div>       </div>   </div></div></div>";e(new google.maps.LatLng(a.sideObject.address_location_g,a.sideObject.address_location_k),j,iconUrl)}};return{restrict:"EA",template:'<div id="gmaps" style="width: 1178px; height: 980px;"></div>',replace:!0,link:b}}]).directive("enterSubmit",["$location",function(a){return{restrict:"A",link:function(b,c,d){c.bind("keydown",function(b){var d=b.keyCode||b.which;13===d&&a.path("/search/"+c.val())})}}}]).directive("searchBlock",function(){return{restrict:"EA",replace:!0,templateUrl:"templates/directives/searchBlock.html"}}).directive("fixInsideSize",["$window","$rootScope",function(a,b){return function(c,d,e){b.item_info_width=d[0].offsetHeight,angular.element(a).bind("resize",function(){b.item_info_width=d[0].offsetHeight,b.$digest()})}}]),angular.module("JINI.services",[]).factory("pie",pie).factory("fixPie",["$document",fixPie]).factory("CategoryService",["$http","$state","$rootScope",CategoryService]).factory("setScopeService",setScopeService).factory("objectService",["$http",objectService]),angular.module("JINI.filters",[]).filter("rawHtml",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]).filter("cut",function(){return function(a,b,c,d){if(!a)return"";if(c=parseInt(c,10),!c)return a;if(a.length<=c)return a;if(a=a.substr(0,c),b){var e=a.lastIndexOf(" ");-1!=e&&(a=a.substr(0,e))}return a+(d||" ...")}}).filter("highlight",["$sce",function(a){return function(b,c){return c&&(b=b.replace(new RegExp("("+c+")","gi"),"<span class='search-word'>$1</span>")),a.trustAsHtml(b)}}]),angular.module("JINI.templates",[]),angular.module("JINI.templates").run(["$templateCache",function(a){"use strict";a.put("templates/categories/8.html",'<search-block></search-block>\r\n<categories-search-block></categories-search-block>\r\n\r\n<div id="svgContainer" ng-attr-class="{{ showCategoriesBlock || showObjectBlock || showCategorySearchBlock ? \'closed\' : \'\'}}" ng-mouseover="closeOnMouseover()">\r\n\r\n    <a title="Go Home" ng-if="parentID == 0" ng-href="#/" class="back-button"></a>\r\n    <a title="Back to parent Category" ng-if="parentID != 0 && parentID != null" ng-href="#/{{ parentID }}/" class="back-button"></a>\r\n    <!-- SVG Menu Generated By CIRCULUS.SVG :: http://sarasoueidan.com/tools/circulus -->\r\n    <svg ng-mouseleave="imageOff()" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-2 -2 504 504" id="menu">\r\n        <g id="trigger" class="trigger menu-trigger" role="button">\r\n            <circle cx="250" cy="250" r="110"></circle>\r\n        </g>\r\n        <g id="symbolsContainer">\r\n            <symbol ng-init="currentItem && $first ? openItem(currentItem) : \'\'" ng-repeat="(k, v) in currentCategories"  class="icon icon-" id="icon-{{$index+1}}" viewBox="0 0 40 40">\r\n                <text ng-if="currentCategoriesLength == 2" fill="#222" dx="-30" y="0" dy="-115px" text-anchor="middle" font-size="22px">{{v.title}}</text>\r\n                <text ng-if="currentCategoriesLength != 2" fill="#222" x="50%" dx="0" y="50%" dy="0px" text-anchor="middle" font-size="16px">{{v.newTitle ? v.newTitle[0] : v.title}}</text>\r\n                <text ng-if="currentCategoriesLength != 2 && v.newTitle" fill="#222" x="50%" dx="0" y="50%" dy="20px" text-anchor="middle" font-size="16px">{{v.newTitle[1]}}</text>\r\n            </symbol>\r\n            <image data-svg-origin="250 250" id="featuredImage" width="200" height="200" x="150" y="150" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="" ng-href="{{centerImage ? mediaUrl + centerImage : \' \'}}" style="transform-origin: 0px 0px 0px; transform: matrix(0.99999, 0, 0, 0.99999, 0.00216995, -0.000230047);"></image>\r\n        </g>\r\n        <g id="itemsContainer">\r\n            <a ng-repeat="(k, v) in currentCategories" ng-class="{{ currentID == k ? \'current\' : \'\'}}" ng-attr-data-category-id="{{k}}" ng-init="$last ? fixPie() : \'\'" ng-click="currentItem && currentItem.id == v.id ? openItem(currentItem) : \'\'" ng-href="{{\'#/\' + k + \'/\' + v.name}}" ng-mouseover="imageOn(v);leftBlocksHandler.categoryHover(v)" class="item" id="item-{{$index+1}}" data-title="{{v.title}}" data-featured-image="{{v.featuredImageUrl}}" data-content-image="{{v.contentImageUrl}}" role="link" tabindex="0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href=" " xlink:title="{{v.title}}" ng-attr-transform="{{pie[currentCategoriesLength].transform_a[$index]}}" data-svg-origin="{{pie[currentCategoriesLength].global.svgOrigin}}" ng-attr-style="{{ isFirst ? \'transform: matrix(0, 0, 0, 0, 250, 250);\' : \'\'}}">\r\n                <path fill="none" stroke="#111" ng-attr-d="{{pie[currentCategoriesLength].global.d}}" class="sector {{!isFirst ? \'opacity\' : \'\'}}"></path>\r\n                <use xlink:href="" ng-href="#icon-{{$index+1}}" width="40" height="40" ng-attr-x="{{pie[currentCategoriesLength].global.x}}" ng-attr-y="{{pie[currentCategoriesLength].global.y}}" ng-attr-transform="{{pie[currentCategoriesLength].transform_b[$index]}}"></use>\r\n            </a>\r\n        </g>\r\n    </svg>\r\n\r\n</div>'),a.put("templates/directives/categoriesBlock.html",'<div>\r\n    <div ng-show="showCategoriesBlock" class="filterResault">\r\n        <span class="slogen">MAKING YOU <span>FEEL</span> LOCAL</span>\r\n        <div class="frButtons">\r\n            <a ng-click="showCategoriesList()" ng-class="showCategoriesBlockList ? \'active\' : \'\'" class="filter-i"></a>\r\n            <a class="filter-i-hover"></a>\r\n            <a class="mapNav-i-hover"></a>\r\n            <a ng-click="showCategoriesMap();" ng-class="showCategoriesBlockMap ? \'active\' : \'\'" class="mapNav-i"></a>\r\n        </div>\r\n    </div>\r\n\r\n    <div ng-show="showCategoriesBlock && showCategoriesBlockList" class="filter_search_result">\r\n        <a ng-click="back()" class="back-btn"></a>\r\n        <span class="ts-title">Search by categorie {{currentItem.title}}</span>\r\n        <div class="results-list" scrollbar="{autoUpdate: true,wheelSpeed : 20}" style="max-height: 100%;width: 429px">\r\n            <div ng-repeat="(k, v) in sideCategories.data" class="text-separator">\r\n                <div class="sm-imgText">\r\n                    <img ng-src="{{mediaUrl + v.featured_image}}" />\r\n                    <div class="inner-smi">\r\n                        <span class="smi-title">{{v.title}}</span>\r\n                        <p  ng-if="v.content" ng-bind-html="v.content | rawHtml" class="smi-text"></p>\r\n                        <div class="more-info-div">\r\n                            <a class="more-info" ng-href="{{\'#/\' + currentItem.id + \'-\' + v.id + \'/\' + currentItem.title + \'/\' + v.name}}" ng-click="closeCategories()">\r\n                                <img class="crown-i" ng-if="v.promoted" src="images/icons/crown.png" />\r\n                                More Info\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                    <div class="clearfix"></div>\r\n                </div>\r\n                <a href="#" class="view-map">\r\n                    <img src="images/icons/g-nav.png" />\r\n                    <span>View on map</span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div ng-if="showCategoriesBlock && showCategoriesBlockMap" class="filter_search_result map" style="width: 1178px;min-height: 955px;">\r\n        <a ng-click="back()" class="back-btn"></a>\r\n        <div id="mapFrame">\r\n            <category-map ng-if="showCategoriesBlock"></category-map>\r\n        </div>\r\n    </div>\r\n</div>'),
a.put("templates/directives/categoriesBlockSearch.html",'<div>\r\n    <div ng-show="showCategorySearchBlock" class="filterResault">\r\n        <span class="slogen">MAKING YOU <span>FEEL</span> LOCAL</span>\r\n        <div class="frButtons">\r\n            <a ng-click="showCategoriesSearchList()" ng-class="showCategoriesSearchBlockList ? \'active\' : \'\'" class="filter-i"></a>\r\n            <a class="filter-i-hover"></a>\r\n            <a class="mapNav-i-hover"></a>\r\n            <a ng-click="showCategoriesSearchMap();" ng-class="showCategoriesSearchBlockMap ? \'active\' : \'\'" class="mapNav-i"></a>\r\n        </div>\r\n    </div>\r\n\r\n    <div ng-show="showCategorySearchBlock && showCategoriesSearchBlockList" class="filter_search_result">\r\n        <a ng-click="back()" class="back-btn"></a>\r\n        <span class="ts-title">Search by categorie {{currentItem.title}}</span>\r\n        <div class="results-list" scrollbar="{autoUpdate: true,wheelSpeed : 20}" style="max-height: 100%;width: 429px">\r\n            <div ng-repeat="(k, v) in category_search_result" class="text-separator">\r\n                <div class="sm-imgText">\r\n                    <img ng-src="{{content_image ? content_image : mediaUrl + v.featured_image}}" />\r\n                    <div class="inner-smi">\r\n                        <span class="smi-title">{{v.title}}</span>\r\n                        <p  ng-if="v.content" ng-bind-html="v.content | rawHtml" class="smi-text"></p>\r\n                        <div class="more-info-div">\r\n                            <a class="more-info" ng-href="{{\'#/\' + currentItem.id + \'-\' + v.id + \'/\' + currentItem.title + \'/\' + v.name}}" ng-click="closeCategories()">\r\n                                <img class="crown-i" ng-if="v.promoted" src="images/icons/crown.png" />\r\n                                More Info\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                    <div class="clearfix"></div>\r\n                </div>\r\n                <a href="#" class="view-map">\r\n                    <img src="images/icons/g-nav.png" />\r\n                    <span>View on map</span>\r\n                </a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div ng-if="showCategorySearchBlock && showCategoriesSearchBlockMap" class="filter_search_result map" style="width: 1178px;min-height: 955px;">\r\n        <a ng-click="back()" class="back-btn"></a>\r\n        <div id="mapFrame">\r\n            <category-map ng-if="showCategorySearchBlock"></category-map>\r\n        </div>\r\n    </div>\r\n</div>'),a.put("templates/directives/categoryHover.html",'<div ng-show="showCategoryBlock" class="openDiv imgNtext visionDiv categoryHover">\r\n    <a  ng-click="closeCategory()" class="back-btn"></a>\r\n    <div ng-if="sideCategory.img" class="top" ng-attr-style="{{sideCategory.img ? \'background-image: url(\' + mediaUrl + sideCategory.img + \');\' : \'\'}}">\r\n    </div>\r\n    <div scrollbar="{autoUpdate: true,wheelSpeed : 20}" style="max-height: 100%" class="bottom {{sideCategory.img ? \'img\' : \'noImg\'}}" >\r\n        <div class="inner-b">\r\n            <span class="inner-title">{{sideCategory.title}}</span>\r\n            <p class="inner-text" ng-if="sideCategory.content" ng-bind-html="sideCategory.content | rawHtml"></p>\r\n        </div>\r\n    </div>\r\n    <!--a class="gold-btn" href="#">Visit our website</a-->\r\n</div>'),a.put("templates/directives/objectBlock.html",'<div>\r\n    <div class="item_info" style="padding: 0 !important;overflow-y: initial;" ng-class="sideObject.content_image ? \'item_info_img\' : \'\'" ng-if="showObjectBlock">\r\n        <div scrollbar="{autoUpdate: true,wheelSpeed : 20}" style="max-height: 100%;width: 542px" >\r\n            <div class="in-scroller-content">\r\n                <a ng-click="back()" class="back-t">Back to list view</a>\r\n                <a href="#" class="close-btn"></a>\r\n                <div class="ii-top" ng-attr-style="{{ sideObject.content_image ? \'background-image: url(\' + sideObject.content_image + \');\' : \'\'}}">\r\n                    <div class="img-top-titles">\r\n                        <span class="inner-title">{{ sideObject.title }}</span>\r\n                        <span class="profession">{{ sideObject.occupation }}</span>\r\n                    </div>\r\n                </div>\r\n                <div class="ii-content">\r\n                    <div class="text-separator first">\r\n                        <a class="map-btn" href="#"><img src="images/icons/big-gold-map-nav.png" /></a>\r\n                        <div class="clearfix"></div>\r\n                        <div class="i-contact-info">\r\n                            <div class="info-title"></div>\r\n                            <table>\r\n                                <tr>\r\n                                    <td class="ii-text first">{{ sideObject.phone }}</td>\r\n                                    <td class="ii-text second">{{ sideObject.address_street + \' \' + sideObject.address_city }}</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td class="ii-text first">{{ sideObject.email }}</td>\r\n                                    <td class="ii-text second">{{ sideObject.french_speakers }}</td>\r\n                                </tr>\r\n                            </table>\r\n                        </div>\r\n                        <div class="i-more-info">\r\n                            <!--\r\n                            <div class="info-title more"></div>\r\n                            <div class="row">\r\n                                <span class="ii-text">$$$</span>\r\n                            </div>\r\n                            <table>\r\n                                <tr>\r\n                                    <td class="ii-text">Mon-Thu</td>\r\n                                    <td class="ii-text second">10:00-19:00</td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td class="ii-text">Fri</td>\r\n                                    <td class="ii-text second">10:30-13:00</td>\r\n                                </tr>\r\n                            </table>\r\n                            -->\r\n                        </div>\r\n                    </div>\r\n                    <div class="text-separator">\r\n                        <!--\r\n                        <table class="item-services">\r\n                            <tr>\r\n                                <th class="first-col"></th>\r\n                                <th class="middle-col">Title A</th>\r\n                                <th class="middle-col">Title B</th>\r\n                                <th></th>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>parking</td>\r\n                                <td><span class="bullet"></span></td>\r\n                                <td></td>\r\n                                <td></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>livraison</td>\r\n                                <td></td>\r\n                                <td><span class="bullet"></span></td>\r\n                                <td></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>Koupat Holim</td>\r\n                                <td><span class="bullet"></span></td>\r\n                                <td><span class="bullet"></span></td>\r\n                                <td></td>\r\n                            </tr>\r\n                        </table>\r\n                        -->\r\n                        <p ng-bind-html="sideObject.content | rawHtml"></p>\r\n                        <p ng-repeat="(k,v) in a track by $index">\r\n                            asda-{{k}}<br>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div ng-if="showObjectBlock && showObjectBlockMap" class="filter_search_result map object" style="width: 1178px;min-height: 955px;">\r\n        <!--<a ng-click="back()" class="back-btn"></a>-->\r\n        <div id="mapFrame">\r\n            <object-map data-lng="{{ sideObject.lng }}" data-lat="{{ sideObject.lat }}" ng-if="showObjectBlock"></object-map>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),a.put("templates/directives/searchBlock.html",'<div ng-show="showSearchBlock" class="search_results">\r\n    <div class="top_strip">\r\n        <span ng-show="center_search_result.count" class="numOfRes"><span class="bold">{{center_search_result.count}}</span> Results for {{search}}</span>\r\n        <span ng-show="!center_search_result.count && keywords.length" class="numOfRes">No results for {{search}}</span>\r\n        <span ng-show="!center_search_result.count && !keywords.length" class="numOfRes">Please type something to start</span>\r\n        <div class="clearfix"></div>\r\n    </div>\r\n    <div class="inner_sr" scrollbar="{autoUpdate: true,wheelSpeed : 20}" style="max-height: 100%;width: 435px">\r\n        <div ng-repeat="(catID, catData) in center_search_result.data" class="search_word_sec">\r\n            <a ng-href="{{\'#/\' + catID + \'/\' + catData.name + \'/search/\' + keywords}}" class="sws-title">{{catData.title}}</a>\r\n            <span class="numOfRes">{{catData.itemsCount}} results</span>\r\n            <div ng-repeat="item in catData.items" class="text-separator">\r\n                <a ng-href="{{\'#/\' + catID + \'-\' + item.id + \'/\' + catData.name + \'/\' + item.name}}" class="smi-title">{{item.title | cut:true:35:\' ...\'}}</a>\r\n                <p class="smi-text" ng-if="item.excerpt" ng-bind-html="item.excerpt | cut:true:150:\' ...\' | rawHtml">Apartment description by the owner or advertiser Apartment description by the owner or advertiser...</p>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</div>')}]);