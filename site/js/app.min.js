function Config(a,b,c,d){console.log("Config Loaded"),b.otherwise("/"),a.state("home",{cache:!1,url:"/",controller:"HomeController",templateUrl:"templates/main/content.html",resolve:{categories:["CategoryService","$stateParams",function(a,b){return console.log("CALL: resolve.categories1"),a.getCategories(b)}],setScope:["$rootScope","$state","$stateParams","categories","setScopeService",function(a,b,c,d,e){return console.log("CALL: resolve.setScope1"),e.init(a,b,c,d)}]}}).state("searchInCategory",{cache:!1,url:"/{id:[1-9][0-9]*}/{title:.*?}/search{map:(?:/map)?}/{search:.+}",controller:"SearchController",templateUrl:"templates/main/content.html",resolve:{categories:["CategoryService","$stateParams",function(a,b){return console.log("CALL: resolve.categories5"),a.getCategories(b)}],getSloganJson:["SloganService",function(a){return console.log("CALL: resolve.getSloganJson5"),a.getSlogan()}],setScope:["$rootScope","$state","$stateParams","categories","setScopeService",function(a,b,c,d,e){return console.log("CALL: resolve.setScope5"),e.init(a,b,c,d)}]}}).state("category",{cache:!1,url:"/{id:[1-9][0-9]*}/{title:.*}{fromSearch:(?:/fromSearch/.*)?}",controller:"CategoryController",templateUrl:"templates/main/content.html",resolve:{categories:["CategoryService","$stateParams",function(a,b){return console.log("CALL: resolve.categories2"),a.getCategories(b)}],getSloganJson:["SloganService",function(a){return console.log("CALL: resolve.getSloganJson2"),a.getSlogan()}],setScope:["$rootScope","$state","$stateParams","categories","setScopeService",function(a,b,c,d,e){return console.log("CALL: resolve.setScope2"),e.init(a,b,c,d)}]}}).state("singlePage",{cache:!1,url:"/{name:(?:vision|recommended|info|contact|24news)}",controller:"SinglePageController",templateUrl:"templates/main/content.html",resolve:{categories:["CategoryService","$stateParams",function(a,b){return console.log("CALL: resolve.categories6"),a.getCategories(b)}],setScope:["$rootScope","$state","$stateParams","categories","setScopeService",function(a,b,c,d,e){return console.log("CALL: resolve.setScope6"),e.init(a,b,c,d)}]}}).state("object",{cache:!1,url:"/{id:[0-9][0-9]*}-{id2:[1-9][0-9]*}{fromCategory:(?:/cat)?}{map:(?:/map)?}/{title:.*}/{title2:.*}/{fromSearch:(?:fromSearch-.*)?}",controller:"CategoryController",templateUrl:"templates/main/content.html",resolve:{categories:["CategoryService","$stateParams",function(a,b){return console.log("CALL: resolve.categories3"),a.getCategories(b)}],setScope:["$rootScope","$state","$stateParams","categories","setScopeService",function(a,b,c,d,e){return console.log("CALL: resolve.setScope3"),e.init(a,b,c,d)}],object:["$stateParams","objectService","setScope","$rootScope",function(a,b,c,d){return console.log("CALL: resolve.object3",c),d.currentItem=!1,b.getObjectData(a).then(function(a){return a.type="object",d.openItem(a,"object"),!0})}]}}).state("search",{cache:!1,url:"/search/{search:.+}",controller:"SearchController",templateUrl:"templates/main/content.html",resolve:{categories:["CategoryService","$stateParams",function(a,b){return console.log("CALL: resolve.categories4"),a.getCategories(b)}],setScope:["$rootScope","$state","$stateParams","categories","setScopeService",function(a,b,c,d,e){return console.log("CALL: resolve.setScope4"),a.allBreadCrumbs=d.breadcrumbs,e.init(a,b,c,d)}]}}),c.addConstraints({Contact:{name:{maxLength:{number:40,message:"Name length cannot be more then 40 letters"},pattern:{value:/(\w+)\s((\w+)[\s]?)+/,message:"Name must have at least 2 words"}},phone:{pattern:{value:/^([0-9]+){7,20}$/,message:"Phone number can contains only digits and must be between 7 and 20 digits."}},email:{email:{message:"Must be a valid E-Mail address."}},reason:{pattern:{value:/[1-5]/,message:"You must select a reason"}}}}),d.setTemplate('<span class="error-txt">{{ violation.message }}</span>')}function Run(a){a.$on("$stateChangeStart",function(a,b){})}function CategoryController(a,b,c,d,e){switch(console.log("CategoryControllerLoaded. ID:",c.id),console.log("CategoryController",d.current),b.currentID=c.id,a.clearSearch(),a.backUrl=!1,d.current.name){case"object":a.$emit("lazyImg:refresh"),a.objectMapUrl="#/"+d.params.id+"-"+d.params.id2+(d.params.map?"":"/map")+"/"+d.params.title+"/"+d.params.title2+"/";var f=d.params.fromSearch?"/search/"+d.params.fromSearch.replace("fromSearch-",""):"";f?a.backUrl="#/"+d.params.id+"/"+d.params.title+f:d.params.fromCategory?(a.objectMapUrl="#/"+d.params.id+"-"+d.params.id2+"/cat"+(d.params.map?"":"/map")+"/"+d.params.title+"/"+d.params.title2+"/",a.backUrl="#/"+d.params.id+"/"+d.params.title):a.backUrl=!1;break;case"category":a.backUrl="#/search/"+d.params.fromSearch.replace("fromSearch-","")}a.showObjectBlockMap=!1,c.map&&(a.showObjectBlockMap=!0)}function HomeController(a,b,c){console.log("HomeController!"),b.imageOff(),b.clearSearch(),a.pie=c}function MainController(a,b,c,d,e,f,g,h,i){console.log("MainController"),b.siteUrl="/Jini3/#",b.mediaUrl="http://jini.co.il/API/public/uploads/",b.centerImage=centerImage="../img/menu-logo.png",b.imageOn=function(a){b.centerImage=a.featuredImageUrl},b.imageOff=function(){b.centerImage=centerImage};var j=[],k="";b.$on("$locationChangeSuccess",function(){try{__ZA.simulateNewPage()}catch(a){}b.isPage=!1,j.push(f.$$path),-1==f.$$path.indexOf("search")&&(k=f.$$path)}),b.back=function(){var a=j.length>1?j.splice(-2)[0]:"/";f.path(a)},b.pie=c,b.fixPie=function(){d.init(b.currentCategoriesLength,b.isFirst)},b.setMapWidth=function(a){var c=window.innerWidth;1627>c&&c>980?(b.set_map_width=c-10-365-80-70,a&&b.$digest()):c>=1627&&(b.set_map_width=1e3,a&&b.$digest())},b.setMapWidth(!1),angular.element(h).bind("resize",function(){b.setMapWidth(!0),window.innerWidth<980&&(top.location.href="/Jini3/mobile.html")});var l=[],m=[],n=[];b.showCategoryBlock=!1,b.showObjectBlock=!1,b.showCategoriesBlock=!1,b.showHomeBanner={};var o=!1;b.openItem=function(c,d){if(("search"==a.current.name||"searchInCategory"==a.current.name)&&"object"!=d)return console.log("in search page"),b.displayHandle.closeAll(),!1;if("singlePage"==a.current.name&&"object"!=d)return console.log("in single page"),b.displayHandle.closeAll(),!1;if(b.clearSearch(),b.showCategorySearchBlock=g.showSearchBlock=b.top_search_result=b.center_search_result=b.category_search_result=!1,o=!0,setTimeout(function(){o=!1},500),console.log("openItem",c),!Object.keys(c).length)return void b.leftBlocksHandler.homePageView();switch(b.showHomeBanner.homeBanner=!1,c.type){case"object":b.leftBlocksHandler.objectView(c);break;case"category":console.log("case 'category':",c,c.items_count),c.items_count?b.leftBlocksHandler.categoryHover(c,!0):b.leftBlocksHandler.categoryList(c)}};var p=!1;b.disableCategoryHover=function(a){console.log("disableCategoryHover",a),p&&(clearTimeout(p),p=!1)},b.categoryHoverHelper=function(a,c){console.log("categoryHoverHelper",a.id,p),p&&(clearTimeout(p),p=!1),p=setTimeout(function(){b.leftBlocksHandler.categoryHover(a,c)},300)},b.leftBlocksHandler={categoryHover:function(c,d){return"search"==a.current.name||"searchInCategory"==a.current.name?(b.displayHandle.closeAll(),!1):"undefined"==typeof d&&o?!1:(q&&clearTimeout(q),b.displayHandle.showCategoryHover(),void b.showCategoryHover(c))},categoryList:function(a){b.showCategoriesBlockMap&&b.setMapWidth(),b.displayHandle.showCategoryList(),b.showCategoryList(a)},objectView:function(a){b.showCategoriesBlockMap&&b.setMapWidth(),b.displayHandle.showObject(),b.showObject(a)},homePageView:function(){b.displayHandle.closeAll(),b.showHomePageBanner()}},b.displayHandle={showCategoryHover:function(){console.log("showCategoryHover"),b.showCategoryBlock=!0,b.showCategoriesBlock=!1,b.showObjectBlock=!1},showCategoryList:function(){console.log("showCategoryList"),b.showCategoriesBlock=!0,b.showCategoryBlock=!1,b.showObjectBlock=!1,b.showCategoriesBlockList||b.showCategoriesBlockMap||(b.showCategoriesBlockList=!0)},showObject:function(){console.log("showObject"),b.showCategoriesBlock=!1,b.showCategoryBlock=!1,b.showObjectBlock=!0},closeAll:function(){console.log("closeAll"),b.showHomeBanner.homeBanner=b.showCategoryBlock=b.showObjectBlock=b.showCategoriesBlock=!1}},b.showCategoryHover=function(a){console.log("showCategoryHover",a),b.showHomeBanner.homeBanner=!1;var c=a.id;if(l[c]){if(b.sideCategory==l[c])return!1;b.sideCategory=l[c],b.$digest()}else b.sideCategory=l[c]={id:c,title:a.title,img:a.contentImageUrl,items_count:a.items_count?!0:!1,content:!1},e.get("/Jini3/public/categories/"+c+"/content").then(function(a){b.sideCategory.content=l[c].content=a.data})},b.showCategoryList=function(a,c){if(b.currentCategoryData=a,"undefined"==typeof c&&(c=0),c){if(1==b.regularCategoryFetchMoreStarted)return!1;b.regularCategoryFetchMoreStarted=!0;var d=a.id;e.get("/Jini3/public/objects/search?categoryid="+d+"&offset="+c).then(function(a){b.sideCategories=b.sideCategories.concat(a.data.items),b.regularCategoryOffsetCount=a.data.offset?a.data.offset:0,b.regularCategoryFetchMoreStarted=!1})}else{b.sideCategories=!1,console.log("$rootScope.showCategoryList",a);var d=a.id;if(m[d]){if(console.log(m[d].length),1==m[d].length){var g=m[d][0];b.displayHandle.closeAll(),f.path("/"+d+"-"+g.id+"/"+g.catName+"/"+g.name+"/")}b.sideCategories=m[d]}else e.get("/Jini3/public/objects/search?categoryid="+d+"&index=100").then(function(a){var c=a.data.items;1==c.length&&(c=c[0],b.displayHandle.closeAll(),f.path("/"+d+"-"+c.id+"/"+c.catName+"/"+c.name+"/")),b.sideCategories=m[d]=a.data.items,b.regularCategoryOffsetCount=a.data.offset?a.data.offset:0})}},b.showObject=function(a){var c=a.id;n[c]?b.sideObject=n[c]:n[c]=b.sideObject=a},b.showHomePageBanner=function(){console.log("showHomePageBanner"),e.get("/Jini3/data/home/banner.json").then(function(a){var c=a.data;b.showHomeBanner.homeBanner=c[Math.floor(Math.random()*c.length)]})};var q=!1;b.closeMenuOnMouseover=function(){return o?!1:void(b.showCategoriesBlock?b.showCategoriesBlockMap?(b.set_map_width=0,q=setTimeout(function(){b.displayHandle.closeAll(),b.$digest()},300)):b.displayHandle.closeAll():b.showObjectBlock&&(b.showObjectBlockMap?(b.set_map_width=0,q=setTimeout(function(){b.displayHandle.closeAll(),b.$digest()},300)):b.displayHandle.closeAll()))},b.showCategoriesMap=function(){return b.showCategoriesBlock?b.showCategoriesBlockMap?!0:(b.showCategoriesBlockList=!1,void(b.showCategoriesBlockMap=!0)):!1},b.showCategoriesList=function(){return b.showCategoriesBlock?b.showCategoriesBlockList?!0:(b.showCategoriesBlockList=!0,b.showCategoriesBlockMap=!1,void b.doResize(300)):!1},b.doResize=function(a){"number"!=typeof a&&(a=0),i(function(){var a=angular.element(h);a.triggerHandler("resize")},a)};var r,s,t,u="/Jini3/public/objects/search?query=",v="/Jini3/public/objects/searchPage?query=",w=!1,x=!1,y=!1,z={page:[],regular:[]};b.keywords={},b.top_search_result=!1,b.center_search_result=!1,b.category_search_result=!1,b.search=function(c){if("search"==a.current.name)if("undefined"==typeof c&&(c=0),s&&clearTimeout(s),t&&clearTimeout(t),w&&clearTimeout(r),c){if(1==b.searchPageFetchMoreStarted)return!1;b.searchPageFetchMoreStarted=!0,w=!0;var d=b.keywords.keywords;r=setTimeout(function(){w=!1,e.get(v+d+"&offset="+c).then(function(a){b.center_search_result.data=b.center_search_result.data.concat(a.data.data),b.searchPageOffsetCount=a.data.offset?a.data.offset:0,b.$$phase||b.$digest(),b.searchPageFetchMoreStarted=!1})},500)}else{var d=b.keywords.keywords;w=!0,r=setTimeout(function(){w=!1,b.center_search_result=b.top_search_result=null,z.page[d]?(b.center_search_result=z.page[d],b.searchPageOffsetCount=z.page[d].offset?z.page[d].offset:0,b.$$phase||b.$digest()):e.get(v+d).then(function(a){z.page[d]=b.center_search_result=a.data,b.searchPageOffsetCount=a.data.offset?a.data.offset:0,b.$$phase||b.$digest()})},500)}else if("searchInCategory"==a.current.name)if(console.log("new searchInCategory"),"undefined"==typeof c&&(c=0),r&&clearTimeout(r),t&&clearTimeout(t),x&&clearTimeout(s),c){if(1==b.fetchMoreStarted)return!1;b.fetchMoreStarted=!0,x=!0,s=setTimeout(function(){x=!1,b.top_search_result=b.center_search_result=!1,e.get(v+b.keywords.keywords+"&categoryid="+a.params.id+"&offset="+c).then(function(a){b.category_search_result=b.category_search_result.concat(a.data.items),console.log(b.category_search_result),b.offsetCount=a.data.offset?a.data.offset:0,b.$$phase||b.$digest(),b.fetchMoreStarted=!1})},500)}else b.category_search_result=!1,x=!0,s=setTimeout(function(){x=!1,b.top_search_result=b.center_search_result=!1,z.page[b.keywords.keywords+"|"+a.params.id]?(b.category_search_result=z.page[b.keywords.keywords+"|"+a.params.id],b.$$phase||b.$digest()):e.get(v+b.keywords.keywords+"&categoryid="+a.params.id).then(function(c){z.page[b.keywords.keywords+"|"+a.params.id]=b.category_search_result=c.data.items,b.offsetCount=c.data.offset?c.data.offset:0,b.$$phase||b.$digest()})},500);else r&&clearTimeout(r),s&&clearTimeout(s),y&&clearTimeout(t),y=!0,t=setTimeout(function(){y=!1,z.regular[b.keywords.keywords]?(b.top_search_result=z.regular[b.keywords.keywords],b.$$phase||b.$digest()):e.get(u+b.keywords.keywords).then(function(a){z.regular[b.keywords.keywords]=b.top_search_result=a.data,b.$$phase||b.$digest()})},500);return!1},b.clearSearch=function(){b.keywords.keywords=null,b.top_search_result=!1},b.closeSearchBtn=function(){return b.top_search_result&&b.top_search_result.length?(b.clearSearch(),!1):b.center_search_result&&b.center_search_result.count||"search"==a.current.name?(f.path(k),!1):b.category_search_result||"searchInCategory"==a.current.name?(f.path("/"+a.params.id+"/"+encodeURI(a.params.title)),!1):(b.clearSearch(),void setTimeout(function(){b.clearSearch()},300))},b.changeUrl=function(c){return"search"==a.current.name?b.keywords.keywords.length>=1&&f.path("/search/"+b.keywords.keywords):"searchInCategory"==a.current.name?(console.log("changeUrl -> searchInCategory",a.params),b.keywords.keywords.length>=1&&(a.params.map?f.path("/"+a.params.id+"/"+a.params.title+"/search/map/"+b.keywords.keywords):f.path("/"+a.params.id+"/"+a.params.title+"/search/"+b.keywords.keywords))):c?null!=b.keywords&&null!=b.keywords.keywords&&f.path("/search/"+b.keywords.keywords):b.search(),!1},b.showCategoriesSearchMap=function(){return console.log("clicked!showCategoriesSeacrhMap"),b.showCategorySearchBlock?b.showCategoriesSearchBlockMap?!0:void f.path("/"+a.params.id+"/"+a.params.title+"/search/map/"+b.keywords.keywords):!1},b.showCategoriesSearchList=function(){return console.log("clicked!showCategoriesList"),b.showCategorySearchBlock?b.showCategoriesSearchBlockList?!0:void f.path("/"+a.params.id+"/"+a.params.title+"/search/"+b.keywords.keywords):!1},b.goToPage=function(c){b.showCategoryBlock&&b.currentPage==c&&a.reload()}}function SearchController(a,b,c,d){console.log("SearchControllerLoaded. ID:"),b.imageOff(),b.displayHandle.closeAll(),b.keywords.keywords=c.search,a.currentID=c.id||0,b.backUrl=!1,"searchInCategory"==d.current.name&&(b.backUrl="#/search/"+b.keywords.keywords),a.currentID?(b.showCategorySearchBlock=!0,a.showSearchBlock=!1):(a.showSearchBlock=!0,b.showCategorySearchBlock=!1),b.showCategoriesBlockMap=!1,b.showCategoriesBlockList=!0,b.showCategoriesSearchBlockMap=!1,b.showCategoriesSearchBlockList=!0,c.map&&(b.showCategoriesBlockMap=!0,b.showCategoriesBlockList=!1,b.showCategoriesSearchBlockMap=!0,b.showCategoriesSearchBlockList=!1),b.search()}function SinglePageController(a,b,c,d){console.log("SinglePageControllerLoaded",c.params.name),a.imageOff(),a.clearSearch(),a.showCategorySearchBlock=a.showHomeBanner.homeBanner=b.showSearchBlock=a.top_search_result=a.center_search_result=a.category_search_result=!1,a.displayHandle.closeAll(),b.pageBlock=!0;var e=c.params.name;a.isPage=!0,a.currentPage=e;var f={};f[e]?(b.pageContent=f[e],console.log(b.pageContent)):d.get("/Jini3/data/pages/"+e+".json").then(function(a){b.pageContent=f[e]=a.data,console.log(b.pageContent)}),"contact"==e&&(b.contact={},b.validate=function(a){a.$valid?(b.notValid=!1,b.save()):b.notValid=!0},b.save=function(){var a=b.contact,c="https://secure.powerlink.co.il/web/webtocrm.aspx",c="/Jini3/public/contactToCRM",e=split2s(a.name," "),f={firstname:e[0],lastname:e[1],telephone1:a.phone,emailaddress1:a.email,description:a.message,leadsourcecode:1,contactreason:a.reason};c=c+"?"+Object.keys(f).map(function(a){return[a,f[a]].map(encodeURIComponent).join("=")}).join("&"),b.response={},d.get(c).then(function(){b.success=!0,b.successText="The form was successfully submitted, we will contact you shortly",b.contact={},console.log("successfully submitted")},function(){b.success=!1,b.error="There was an error while sending the form, please try again later.",console.log("form failed")})})}function setScopeService(){return{init:function(a,b,c,d){console.log("CALL: setScopeService");var e=c.id||0;a.currentBreadCrumbs=d.breadcrumbs[e];var f=d.parents[e];return d.categories.length&&"undefined"==typeof f&&b.go("home"),a.currentCategories=getCategoriesByParentArray(d.categories,f.slice()),a.currentCategoriesLength=Object.keys(a.currentCategories).length,console.log("$rootScope.currentCategories:",a.currentCategories),a.currentItem=getCurrentCategoryByParentArray(d.categories,f.slice()),0!=e&&(a.currentItem.type="category"),console.log("$rootScope.currentItem",a.currentItem),0==f.length?a.parentID=null:f.length<=1?a.parentID=0:(itemParents=d.breadcrumbs[e],itemParents.length<2?a.parentID=0:itemParents[itemParents.length-1].hasItems?a.parentID=itemParents[itemParents.length-2]:2==itemParents.length?a.parentID=0:a.parentID=itemParents[itemParents.length-3]),a.currentCategories=splitCurrentCategoriesTitle(a.currentCategories),!0}}}function SloganService(a,b){var c={};return c.getSlogan=function(){return console.log("CALL: SloganService.getSlogan",c),c.slogan?void(b.selectedSlogan=c.slogan[Math.floor(Math.random()*c.slogan.length)]):a.get("data/categories/slogan.json").then(function(a){return b.selectedSlogan=a.data[Math.floor(Math.random()*a.data.length)],c.slogan=a.data})},c}function CategoryService(a,b,c){var d={};return d.getCategories=function(e){if(c.isFirst=!1,d.categoriesData)return d.categoriesData;var f=e.id||0;return d.categoriesData=a.get("/Jini3/public/categories/"+f+"/categories").then(function(a){return("undefined"==typeof a.data.parents||"undefined"==typeof a.data.parents[f])&&b.go("home"),c.isFirst=!0,a.data})},d}function objectService(a){var b={};return b.objectData=[],b.getObjectData=function(c){var d=c.id2||0;return b.objectData[d]?b.objectData[d]:b.objectData[d]=a.get("/Jini3/public/objects/"+d).then(function(a){return a.data})},b}function fixPie(a){return{init:function(a,b){this.rotateCircle(a),this.rotateImage(a),b&&this.openCircle(a)},rotateCircle:function(b){var c=!1;switch(b){case 3:c=-30;break;case 4:c=-45;break;case 5:c=-55;break;case 6:c=-60;break;case 7:c=-65;break;case 8:c=-67;break;case 9:c=-70;break;case 10:c=-71}c&&TweenLite.set(a[0].querySelector("#menu"),{rotation:c,transformOrigin:"50% 50%"})},rotateImage:function(b){var c=!1;switch(b){case 2:c=-0;break;case 3:c=30;break;case 5:c=55;break;case 4:c=45;break;case 6:c=60;break;case 7:c=65;break;case 8:c=67;break;case 9:c=70;break;case 10:c=71}c&&TweenLite.set(a[0].querySelector("#featuredImage"),{rotation:c,transformOrigin:"50% 50%"})},openCircle:function(b){var c=b,d=a[0].querySelector("#menu"),e=d.querySelectorAll(".item"),f=360/c,g=new TimelineLite;g.to(e,.2,{scale:1,ease:Back.easeOut.config(4)},.05);for(var h=0;h<e.length;h++)g.to(e[h],.7,{rotation:-h*f+"deg"},.35);setTimeout(function(){for(var a=0;a<e.length;a++)e[a].querySelectorAll(".sector")[0].style.opacity="0.8",e[a].querySelectorAll(".sector")[0].style.transition="all .2s linear"},1e3)}}}function pie(){return{2:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 0.03084187958484108,246.07317067204482 l134.9833453850242,2.1204878370957942 A115,115 0 0,1 365,250",x:"280.0154113769531",y:"178.03659057617188"},transform_a:["rotate(0 250 250)","rotate(-180 250 250)"],transform_b:["rotate(0 300.0154113769531 198.03659057617188)","rotate(180 250.0154113769531 80.03659057617188)"]},3:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 127.27406159621479,32.196547219952635 l66.272006738044,117.61386450122558 A115,115 0 0,1 365,250",x:"339.0684509277344",y:"77.48664855957031"},transform_a:["rotate(0 250 250)","rotate(-120 250 250)","rotate(-240 250 250)"],transform_b:["rotate(30 359.0684509277344 97.48664855957031)","rotate(-140 359.0684509277344 97.48664855957031)","rotate(-140 359.0684509277344 97.48664855957031)"]},4:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 251.96347522217783,0.007710588802581242 l-1.0602766199760367,134.9958362820466 A115,115 0 0,1 365,250",x:"355.98175048828125",y:"105.00385284423828"},transform_a:["rotate(0 250 250)","rotate(-90 250 250)","rotate(-180 250 250)","rotate(-270 250 250)"],transform_b:["rotate(45 375.98175048828125 125.00385284423828)","rotate(45 375.98175048828125 125.00385284423828)","rotate(-135 375.98175048828125 125.00385284423828)","rotate(45 375.98175048828125 125.00385284423828)"]},5:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 328.7466299138262,12.725963752426338 l-42.52318015346617,128.12797957368977 A115,115 0 0,1 365,250",x:"382.0361633300781",y:"120.26736450195312"},transform_a:["rotate(0 250 250)","rotate(-72 250 250)","rotate(-144 250 250)","rotate(-216 250 250)","rotate(-288 250 250)"],transform_b:["rotate(55 402.0361633300781 140.26736450195312)","rotate(55 402.0361633300781 140.26736450195312)","rotate(-125 402.0361633300781 140.26736450195312)","rotate(-125 402.0361633300781 140.26736450195312)","rotate(55 402.0361633300781 140.26736450195312)"]},6:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 376.1319059537548,34.151112348307095 l-68.1112292150276,116.55839933191416 A115,115 0 0,1 365,250",x:"392.6246337890625",y:"136.67543029785156"},transform_a:["rotate(0 250 250)","rotate(-60 250 250)","rotate(-120 250 250)","rotate(-180 250 250)","rotate(-240 250 250)","rotate(-300 250 250)"],transform_b:["rotate(60 412.6246337890625 156.67543029785156)","rotate(60 412.6246337890625 156.67543029785156)","rotate(-120 412.6246337890625 156.67543029785156)","rotate(-120 412.6246337890625 156.67543029785156)","rotate(-120 412.6246337890625 156.67543029785156)","rotate(60 412.6246337890625 156.67543029785156)"]},7:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 406.7480905992045,55.243649414188354 l-84.64396892357041,105.16842931633829 A115,115 0 0,1 365,250",x:"399.1138000488281",y:"149.02609252929688"},transform_a:["rotate(0 250 250)","rotate(-51.42857142857143 250 250)","rotate(-102.85714285714286 250 250)","rotate(-154.28571428571428 250 250)","rotate(-205.71428571428572 250 250)","rotate(-257.14285714285717 250 250)","rotate(-308.57142857142856 250 250)"],transform_b:["rotate(65 419.1138000488281 169.02609252929688)","rotate(65 419.1138000488281 169.02609252929688)","rotate(-115 419.1138000488281 169.02609252929688)","rotate(-115 419.1138000488281 169.02609252929688)","rotate(-115 419.1138000488281 169.02609252929688)","rotate(-115 419.1138000488281 169.02609252929688)","rotate(65 419.1138000488281 169.02609252929688)"]},8:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 427.4695309138226,73.91886643587344 l-95.8335466934642,95.08381212462837 A115,115 0 0,1 365,250",x:"403.3679504394531",y:"158.58712768554688"},transform_a:["rotate(0 250 250)","rotate(-45 250 250)","rotate(-90 250 250)","rotate(-135 250 250)","rotate(-180 250 250)","rotate(-225 250 250)","rotate(-270 250 250)","rotate(-315 250 250)"],transform_b:["rotate(67 423.3679504394531 178.58712768554688)","rotate(67 423.3679504394531 178.58712768554688)","rotate(67 423.3679504394531 178.58712768554688)","rotate(-115 423.3679504394531 178.58712768554688)","rotate(-115 423.3679504394531 178.58712768554688)","rotate(-115 423.3679504394531 178.58712768554688)","rotate(67 423.3679504394531 178.58712768554688)","rotate(67 423.3679504394531 178.58712768554688)"]},9:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 442.0708808983809,89.97257512876115 l-103.71827568512572,86.41480943046898 A115,115 0 0,1 365,250",x:"406.30401611328125",y:"166.1788330078125"},transform_a:["rotate(0 250 250)","rotate(-40 250 250)","rotate(-80 250 250)","rotate(-120 250 250)","rotate(-160 250 250)","rotate(-200 250 250)","rotate(-240 250 250)","rotate(-280 250 250)","rotate(-320 250 250)"],transform_b:["rotate(70 426.30401611328125 186.1788330078125)","rotate(70 426.30401611328125 186.1788330078125)","rotate(70 426.30401611328125 186.1788330078125)","rotate(-115 426.30401611328125 186.1788330078125)","rotate(-115 426.30401611328125 186.1788330078125)","rotate(-115 426.30401611328125 186.1788330078125)","rotate(-115 426.30401611328125 186.1788330078125)","rotate(70 426.30401611328125 186.1788330078125)","rotate(70 426.30401611328125 186.1788330078125)"]},10:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 452.71489520809337,103.6898114936225 l-109.46604341237042,79.00750179344385 A115,115 0 0,1 365,250",x:"408.41387939453125",y:"172.33949279785156"},transform_a:["rotate(0 250 250)","rotate(-36 250 250)","rotate(-72 250 250)","rotate(-108 250 250)","rotate(-144 250 250)","rotate(-180 250 250)","rotate(-216 250 250)","rotate(-252 250 250)","rotate(-288 250 250)","rotate(-324 250 250)"],transform_b:["rotate(72 428.41387939453125 192.33949279785156)","rotate(72 428.41387939453125 192.33949279785156)","rotate(72 428.41387939453125 192.33949279785156)","rotate(-109 428.41387939453125 192.33949279785156)","rotate(-109 428.41387939453125 192.33949279785156)","rotate(-109 428.41387939453125 192.33949279785156)","rotate(-109 428.41387939453125 192.33949279785156)","rotate(72 428.41387939453125 192.33949279785156)","rotate(72 428.41387939453125 192.33949279785156)","rotate(72 428.41387939453125 192.33949279785156)"]}}}function split2s(a,b){var c=a.trim().split(" ");if(console.log(c),c.length<=1)return[a];var d=c,e=c.splice(Math.ceil(c.length/2),Math.floor(c.length/2));return[d.join(" "),e.join(" ")]}function replaceAll(a,b,c){return c.replace(new RegExp(a,"g"),b)}function splitCurrentCategoriesTitle(a){for(i in a){var b=a[i].title,c=split2s(b," ");a[i].newTitle=c.length>1?c:!1}return a}function getCategoriesByParentArray(a,b){if(0!=b.length){var c=b[0];b.shift(),a[c].items_count&&(a=getCategoriesByParentArray(a[c].items,b))}return a}function getCurrentCategoryByParentArray(a,b){if(1==b.length)currentCategory={id:b[0],title:a[b[0]].title,contentImageUrl:a[b[0]].contentImageUrl,featuredImageUrl:a[b[0]].featuredImageUrl,items_count:a[b[0]].items_count?!0:!1,contetnt:!1};else if(0==b.length)currentCategory={};else{var c=b[0];b.shift(),currentCategory=getCurrentCategoryByParentArray(a[c].items,b)}return currentCategory}window.innerWidth<980&&(top.location.href="/Jini3/mobile.html"),angular.module("JINI",["ui.router","ngStorage","ngMessages","ngAnimate","ngTinyScrollbar","JINI.controllers","JINI.directives","JINI.filters","JINI.services","JINI.templates","valdr","angularLazyImg"]).config(Config).run(Run),Config.$inject=["$stateProvider","$urlRouterProvider","valdrProvider","valdrMessageProvider"],Run.$inject=["$rootScope"],angular.module("JINI.controllers",[]),angular.module("JINI.controllers").controller("CategoryController",["$rootScope","$scope","$stateParams","$state","$http",CategoryController]),angular.module("JINI.controllers").controller("HomeController",["$scope","$rootScope","pie",HomeController]),angular.module("JINI.controllers").controller("MainController",MainController),MainController.$inject=["$state","$rootScope","pie","fixPie","$http","$location","$scope","$window","$timeout"],angular.module("JINI.controllers").controller("SearchController",["$scope","$rootScope","$stateParams","$state",SearchController]),angular.module("JINI.controllers").controller("SinglePageController",["$rootScope","$scope","$state","$http",SinglePageController]),angular.module("JINI.directives",[]).directive("categoryhover",function(){return{restrict:"EA",replace:!0,templateUrl:"templates/directives/categoryHover.html"}}).directive("pageBlock",function(){return{restrict:"EA",replace:!0,templateUrl:"templates/directives/pageBlock.html"}}).directive("objectblock",function(){return{restrict:"EA",replace:!0,templateUrl:"templates/directives/objectBlock.html"}}).directive("categoriesblock",function(){return{restrict:"EA",replace:!0,templateUrl:"templates/directives/categoriesBlock.html"}}).directive("categoriesSearchBlock",function(){return{restrict:"EA",replace:!0,templateUrl:"templates/directives/categoriesBlockSearch.html"}}).directive("categoryMap",["$http","$rootScope",function(a,b){var c=[],d=function(d,e,f){function g(){void 0===j&&(j=new google.maps.Map(e[0],m))}function h(a,b,c,d){var e=new google.maps.Marker({map:j,position:a,animation:google.maps.Animation.DROP});c&&e.setIcon(c),""!=b&&"undefined"!=typeof b&&(e.info=b,l.push(e),google.maps.event.addListener(e,"click",function(){void 0!==k&&k.close(),k=new InfoBubble({map:j,content:e.info,padding:0,backgroundColor:"white",borderColor:"transparent",backgroundClassName:"infoBubbleBlock",minHeight:d?"370":"130",maxHeight:d?"370":"130",minWidth:"450",maxWidth:"450",borderRadius:0,borderWidth:0,arrowSize:20,arrowPosition:30,arrowStyle:2,shadowStyle:0,closeSrc:"/Jini3/images/icons/close-white-bg.png"}),k.open(j,e)}))}function i(a){for(var b=0;b<a.data.length;b++){var c=a.data[b];c.score>=1?iconUrl="/Jini3/public/img/icons/map_pin_promoted_xs.png":iconUrl="/Jini3/public/img/icons/map_pin_xs.png";var e='<div class="marker-popup'+(c.content_image?"  content-image":" no-content-image")+'"><div class="top-pane" style="background-image: url('+c.content_image+');"></div>   <div class="main-pane">       <div class="row heading">           <a href="#/'+d.currentItem.id+"-"+c.id+"/cat/"+d.currentItem.title+"/"+c.name+'/" class="col-md-12">               <h2 class="title">'+c.title.trunc(38,!0)+'</h2>           </a>       </div>       <div class="row heading">           <div class="col-md-12">               <div class="content">'+decodeEntities(c.excerpt).trunc(78,!0)+'</div>           </div>       </div>       <div class="row actions actions-pane">           <div class="pull-left"><span class="address">'+c.address_street+" "+c.address_city+'</span></div>           <a class="more-info map-more-info" href="#/'+d.currentItem.id+"-"+c.id+"/cat/"+d.currentItem.title+"/"+c.name+'/">More Info</a>       </div>   </div></div></div>';h(new google.maps.LatLng(c.geo_latitude,c.geo_longitude),e,iconUrl,c.content_image?!0:!1)}}var j,k,l=[],m={center:new google.maps.LatLng(32.0713513,34.8798235,9),zoom:10,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0,scrollwheel:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER,style:google.maps.ZoomControlStyle.LARGE}};g();var n=d.currentItem.id;console.log("scope.keywords.keywords",d.keywords.keywords,typeof d.keywords.keywords);var o="undefined"!=typeof d.keywords.keywords&&"function"!=typeof d.keywords.keywords?d.keywords.keywords:"";if(b.categoryMapItemsLoaded=!1,c[n+o]){if(b.categoryMapItemsLoaded=!0,0==c[n+o].data.length)return b.showCategoriesList(),!1;i(c[n+o])}else a.get("/Jini3/public/objects/locations?categoryid="+n+(o?"&query="+o:"")).then(function(a){return console.log("getMapData",a.data),0==a.data.data.length?(b.showCategoriesList(),!1):(c[n+o]=a.data,console.log(c[n+o]),b.categoryMapItemsLoaded=!0,void i(c[n+o]))})};return{restrict:"EA",template:'<div id="gmaps" style="width: 1178px; height: 980px;"></div>',replace:!0,link:d}}]).directive("objectMap",["$http",function(a){var b=function(a,b,c){function d(){void 0===f&&(f=new google.maps.Map(b[0],i))}function e(b,c,d){var e=new google.maps.Marker({map:f,position:b,animation:google.maps.Animation.DROP});d&&e.setIcon(d),""!=c&&"undefined"!=typeof c&&(e.info=c,
h.push(e),g=new InfoBubble({map:f,content:e.info,position:new google.maps.LatLng(parseFloat(a.sideObject.address.location_g)+.035,a.sideObject.address.location_k),padding:0,backgroundColor:"white",borderColor:"transparent",backgroundClassName:"infoBubbleBlock",minHeight:a.sideObject._content_image?"370":"130",maxHeight:a.sideObject._content_image?"370":"130",minWidth:"450",maxWidth:"450",borderRadius:0,borderWidth:0,arrowSize:20,arrowPosition:30,arrowStyle:2,shadowStyle:0,closeSrc:"/Jini3/images/icons/close-white-bg.png"}),g.open(f),google.maps.event.addListener(e,"click",function(){g.open(f,e)}))}console.log("objectMap",c);var f,g,h=[],i={center:new google.maps.LatLng(32.0713513,34.8798235,9),zoom:10,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0,scrollwheel:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER,style:google.maps.ZoomControlStyle.LARGE}};if(d(),a.sideObject.map){console.log("mapItem"),a.sideObject.score>=1?iconUrl="/Jini3/public/img/icons/map_pin_promoted_xs.png":iconUrl="/Jini3/public/img/icons/map_pin_xs.png";var j='<div class="marker-popup'+(a.sideObject._content_image?" content-image":" no-content-image")+'"><div class="top-pane" style="background-image: url('+a.sideObject._content_image+');"></div>   <div class="main-pane">       <div class="row heading">           <a href="#/0-'+a.sideObject.id+"/Home/"+a.sideObject.title+'/" class="col-md-12">               <h2 class="title">'+a.sideObject.title.trunc(38,!0)+'</h2>           </a>       </div>       <div class="row heading">           <div class="col-md-12">               <div class="content">'+decodeEntities(a.sideObject.excerpt).trunc(78,!0)+'</div>           </div>       </div>       <div class="row actions actions-pane">           <div class="pull-left"><span class="address">'+a.sideObject.address.address+" "+a.sideObject.address.city+'</span></div>           <a class="more-info map-more-info" href="#/0-'+a.sideObject.id+"/Home/"+a.sideObject.title+'/">More Info</a>       </div>   </div></div></div>';e(new google.maps.LatLng(a.sideObject.address.location_g,a.sideObject.address.location_k),j,iconUrl)}};return{restrict:"EA",template:'<div id="gmaps" style="width: 1178px; height: 980px;"></div>',replace:!0,link:b}}]).directive("enterSubmit",["$location",function(a){return{restrict:"A",link:function(b,c,d){c.bind("keydown",function(b){var d=b.keyCode||b.which;13===d&&""!=c.val()&&a.path("/search/"+c.val())})}}}]).directive("searchBlock",function(){return{restrict:"EA",replace:!0,templateUrl:"templates/directives/searchBlock.html"}}).directive("fixInsideSize",["$window","$rootScope",function(a,b){return function(c,d,e){angular.element(a).bind("resize",function(){var a=d[0].offsetHeight;a>730?b.item_info_height=a:b.item_info_height=a+53,console.log(b.item_info_height),b.$digest()});var f=d[0].offsetHeight;f>730?b.item_info_height=f:b.item_info_height=f+53,b.$digest(),console.log(b.item_info_height)}}]);var decodeEntities=function(){function a(a){return a&&"string"==typeof a&&(a=a.replace(/<script[^>]*>([\S\s]*?)<\/script>/gim,""),a=a.replace(/<\/?\w(?:[^"'>]|"[^"]*"|'[^']*')*>/gim,""),b.innerHTML=a,a=b.textContent,b.textContent=""),a}var b=document.createElement("div");return a}();angular.module("JINI.services",[]).factory("pie",pie).factory("fixPie",["$document",fixPie]).factory("CategoryService",["$http","$state","$rootScope",CategoryService]).factory("SloganService",["$http","$rootScope",SloganService]).factory("setScopeService",setScopeService).factory("objectService",["$http",objectService]),angular.module("JINI.filters",[]).filter("rawHtml",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]).filter("cut",function(){return function(a,b,c,d){if(!a)return"";if(c=parseInt(c,10),!c)return a;if(a.length<=c)return a;if(a=a.substr(0,c),b){var e=a.lastIndexOf(" ");-1!=e&&(a=a.substr(0,e))}return a+(d||" ...")}}).filter("highlight",["$sce",function(a){return function(b,c){return c&&(b=b.replace(new RegExp("("+c+")","gi"),"<span class='search-word'>$1</span>")),a.trustAsHtml(b)}}]),angular.module("JINI.templates",[]),angular.module("JINI.templates").run(["$templateCache",function(a){"use strict";a.put("templates/directives/categoriesBlock.html",'<div>\r\n    <div ng-show="showCategoriesBlock" ng-class="showCategoriesBlock ? \'collapsed\' : \'\'" class="filterResault">\r\n        <a ng-click="displayHandle.closeAll()" class="back-btn"></a>\r\n        <span class="slogen">{{selectedSlogan}}</span>\r\n        <div class="frButtons" ng-show="showCategoriesBlockList">\r\n            <a ng-click="showCategoriesList()" ng-class="showCategoriesBlockList ? \'active\' : \'\'" class="filter-i">\r\n                <span class="filterTooltip frButtonsTooltip">Switch to list view</span>\r\n            </a>\r\n            <a class="filter-i-hover"></a>\r\n            <a class="mapNav-i-hover"></a>\r\n            <a ng-click="showCategoriesMap();" ng-class="showCategoriesBlockMap ? \'active\' : \'\'" class="mapNav-i">\r\n                <span class="mapNavTooltip frButtonsTooltip">Switch to map view</span>\r\n            </a>\r\n        </div>\r\n    </div>\r\n\r\n    <div ng-show="showCategoriesBlock && showCategoriesBlockList" ng-class="showCategoriesBlock && showCategoriesBlockList ? \'collapsed\' : \'\'" class="filter_search_result">\r\n        <div class="innerSpinner spinner" ng-hide="showCategoriesBlockMap || sideCategories">\r\n            <div class="double-bounce1"></div>\r\n            <div class="double-bounce2"></div>\r\n        </div>\r\n        <span class="ts-title">Search by categorie {{currentItem.title}}</span>\r\n        <div class="results-list" scrollbar="{autoUpdate: true,wheelSpeed : 20, reFetchOnScroll:true, fetchType: \'category\'}" nextUrl="{{regularCategoryOffsetCount}}" style="max-height: 100%;width: 429px">\r\n            <div ng-repeat="(k, v) in sideCategories" class="text-separator">\r\n                <div class="sm-imgText">\r\n                    <img ng-src="{{v.featured_image ? mediaUrl + v.featured_image : mediaUrl + currentItem.featuredImageUrl }}" />\r\n                    <div class="inner-smi">\r\n                        <span class="smi-title">{{v.title}}</span>\r\n                        <p  ng-if="v.content" ng-bind-html="v.content | rawHtml" class="smi-text"></p>\r\n                        <div class="more-info-div">\r\n                            <a class="more-info" ng-href="{{\'#/\' + currentItem.id + \'-\' + v.id + \'/cat/\' + currentItem.title + \'/\' + v.name + \'/\'}}" ng-click="closeCategories()">\r\n                                <img class="crown-i" ng-if="v.score >= 1" src="images/icons/crown.png" />\r\n                                More Info\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                    <div class="clearfix"></div>\r\n                </div>\r\n                <a ng-show="v.address_location_g != \'\' && v.address_location_k != \'\' && v.address_location_g != null && v.address_location_k != null" ng-href="{{\'#/\' + currentItem.id + \'-\' + v.id + \'/map/\' + currentItem.title + \'/\' + v.name + \'/\'}}" class="view-map">\r\n                    <div></div>\r\n                    <span>Afficher sur la carte</span>\r\n                </a>\r\n            </div>\r\n            <div ng-show="regularCategoryFetchMoreStarted" style="position: relative;width:auto;height: 100px">\r\n                <div class="innerSpinner spinner">\r\n                    <div class="double-bounce1"></div>\r\n                    <div class="double-bounce2"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div ng-if="showCategoriesBlock && showCategoriesBlockMap" ng-class="showCategoriesBlock && showCategoriesBlockMap ? \'collapsed\' : \'\'" class="filter_search_result map" ng-attr-style="{{closeMapImportant ? \'width:0 !important\' : \'\'}}" style="width: 1178px;min-height: 955px;">\r\n        <div class="frButtons active">\r\n            <a ng-click="showCategoriesList()" ng-class="showCategoriesBlockList ? \'active\' : \'\'" class="filter-i">\r\n                <span class="filterTooltip frButtonsTooltip">Switch to list view</span>\r\n            </a>\r\n            <a class="filter-i-hover"></a>\r\n            <a class="mapNav-i-hover"></a>\r\n            <a ng-click="showCategoriesMap();" ng-class="showCategoriesBlockMap ? \'active\' : \'\'" class="mapNav-i">\r\n                <span class="mapNavTooltip frButtonsTooltip">Switch to map view</span>\r\n            </a>\r\n        </div>\r\n        <div id="mapFrame">\r\n            <div class="innerSpinner spinner" ng-hide="categoryMapItemsLoaded">\r\n                <div class="double-bounce1"></div>\r\n                <div class="double-bounce2"></div>\r\n            </div>\r\n            <category-map ng-if="showCategoriesBlock"></category-map>\r\n        </div>\r\n    </div>\r\n</div>'),a.put("templates/directives/categoriesBlockSearch.html",'<div>\r\n    <div ng-show="showCategorySearchBlock" ng-class="showCategorySearchBlock ? \'collapsed\' : \'\'" class="filterResault">\r\n        <a ng-href="{{backUrl}}" ng-if="backUrl" class="back-btn"></a>\r\n        <span class="slogen">{{selectedSlogan}}</span>\r\n        <div class="frButtons" ng-show="showCategoriesSearchBlockList">\r\n            <a ng-click="showCategoriesSearchList()" ng-class="showCategoriesSearchBlockList ? \'active\' : \'\'" class="filter-i">\r\n                <span class="filterTooltip frButtonsTooltip">Switch to list view</span>\r\n            </a>\r\n            <a class="filter-i-hover"></a>\r\n            <a class="mapNav-i-hover"></a>\r\n            <a ng-click="showCategoriesSearchMap();" ng-class="showCategoriesSearchBlockMap ? \'active\' : \'\'" class="mapNav-i">\r\n                <span class="mapNavTooltip frButtonsTooltip">Switch to map view</span>\r\n            </a>\r\n        </div>\r\n    </div>\r\n\r\n    <div ng-class="showCategorySearchBlock && showCategoriesSearchBlockList ? \'collapsed\' : \'\'" ng-show="showCategorySearchBlock && showCategoriesSearchBlockList" class="filter_search_result">\r\n        <div class="innerSpinner spinner" ng-hide="showCategoriesSearchBlockMap || category_search_result">\r\n            <div class="double-bounce1"></div>\r\n            <div class="double-bounce2"></div>\r\n        </div>\r\n        <span class="ts-title">Search by categorie {{currentItem.title}}</span>\r\n        <div class="results-list" scrollbar="{autoUpdate: true,wheelSpeed : 20, reFetchOnScroll:true, fetchType: \'searchInCategory\'}" nextUrl="{{offsetCount}}" style="max-height: 100%;width: 429px">\r\n            <div ng-repeat="(k, v) in category_search_result" class="text-separator">\r\n                <div class="sm-imgText">\r\n                    <img ng-src="{{v.featured_image ? mediaUrl + v.featured_image : mediaUrl + currentItem.featuredImageUrl }}" />\r\n                    <div class="inner-smi">\r\n                        <span class="smi-title">{{v.title}}</span>\r\n                        <p  ng-if="v.content" ng-bind-html="v.content | rawHtml" class="smi-text"></p>\r\n                        <div class="more-info-div">\r\n                            <a class="more-info" ng-href="{{\'#/\' + currentItem.id + \'-\' + v.id + \'/\' + currentItem.title + \'/\' + v.name + \'/fromSearch-\' + keywords.keywords}}" ng-click="closeCategories()">\r\n                                <img class="crown-i" ng-if="v.score >= 1" src="images/icons/crown.png" />\r\n                                More Info\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                    <div class="clearfix"></div>\r\n                </div>\r\n                <a ng-show="v.address_location_g != \'\' && v.address_location_k != \'\' && v.address_location_g != null && v.address_location_k != null" ng-href="{{\'#/\' + currentItem.id + \'-\' + v.id + \'/map/\' + currentItem.title + \'/\' + v.name + \'/fromSearch-\' + keywords.keywords}}" class="view-map">\r\n                    <div></div>\r\n                    <span>Afficher sur la carte</span>\r\n                </a>\r\n            </div>\r\n            <div ng-show="fetchMoreStarted" style="position: relative;width:auto;height: 100px">\r\n                <div class="innerSpinner spinner">\r\n                    <div class="double-bounce1"></div>\r\n                    <div class="double-bounce2"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div ng-class="showCategorySearchBlock && showCategoriesSearchBlockMap ? \'collapsed\' : \'\'" ng-if="showCategorySearchBlock && showCategoriesSearchBlockMap" class="filter_search_result map" style="width: 1178px;min-height: 955px;">\r\n        <div class="frButtons active">\r\n            <a ng-click="showCategoriesSearchList()" ng-class="showCategoriesSearchBlockList ? \'active\' : \'\'" class="filter-i">\r\n                <span class="filterTooltip frButtonsTooltip">Switch to list view</span>\r\n            </a>\r\n            <a class="filter-i-hover"></a>\r\n            <a class="mapNav-i-hover"></a>\r\n            <a ng-click="showCategoriesSearchMap();" ng-class="showCategoriesSearchBlockMap ? \'active\' : \'\'" class="mapNav-i">\r\n                <span class="mapNavTooltip frButtonsTooltip">Switch to map view</span>\r\n            </a>\r\n        </div>\r\n\r\n        <div id="mapFrame">\r\n            <div class="innerSpinner spinner" ng-hide="categoryMapItemsLoaded">\r\n                <div class="double-bounce1"></div>\r\n                <div class="double-bounce2"></div>\r\n            </div>\r\n            <category-map ng-if="showCategorySearchBlock"></category-map>\r\n        </div>\r\n    </div>\r\n</div>'),a.put("templates/directives/categoryHover.html",'<div ng-show="showCategoryBlock" ng-class="showCategoryBlock ? \'collapsed\' : \'\'" class="openDiv imgNtext visionDiv categoryHover">\r\n    <a  ng-click="displayHandle.closeAll()" class="back-btn"></a>\r\n    <div lazy-img=\'{{mediaUrl + sideCategory.img}}\' ng-if="sideCategory.img" class="top">\r\n        <!--ng-attr-style="{{sideCategory.img ? \'background-image: url(\' + mediaUrl + sideCategory.img + \');\' : \'\'}}" -->\r\n        <div class="innerSpinner spinner" style="display: none">\r\n            <div class="double-bounce1"></div>\r\n            <div class="double-bounce2"></div>\r\n        </div>\r\n    </div>\r\n    <div scrollbar="{autoUpdate: true,wheelSpeed : 20}" style="max-height: 100%" class="bottom {{sideCategory.img ? \'img\' : \'noImg\'}}" >\r\n        <div class="inner-b">\r\n            <span class="inner-title">{{sideCategory.title}}</span>\r\n            <p class="inner-text" ng-if="sideCategory.content" ng-bind-html="sideCategory.content | rawHtml"></p>\r\n        </div>\r\n    </div>\r\n    <!--a class="gold-btn" href="#">Visit our website</a-->\r\n</div>'),a.put("templates/directives/objectBlock.html",'<div>\r\n    <div class="item_info {{showObjectBlock ? \'collapsed\' : \'\'}}" ng-class="sideObject._content_image ? \'item_info_img\' : \'\'" ng-show="showObjectBlock">\r\n        <div scrollbar="{autoUpdate: true,wheelSpeed : 20}" style="max-height: 100%;width: 542px" >\r\n            <div class="in-scroller-content">\r\n                <a ng-href="{{backUrl}}" ng-if="backUrl" class="back-t">Revenir à la liste des résultats</a>\r\n                <a ng-click="displayHandle.closeAll()" class="close-btn"></a>\r\n                <div class="ii-top" lazy-img="{{ sideObject._content_image ? mediaUrl + sideObject._content_image : \'\'}}">\r\n                    <!--  ng-attr-style="{{ sideObject.content_image ? \'background-image: url(\' + mediaUrl + sideObject.content_image + \');\' : \'\'}}" -->\r\n                    <div class="innerSpinner spinner" style="display: none">\r\n                        <div class="double-bounce1"></div>\r\n                        <div class="double-bounce2"></div>\r\n                    </div>\r\n                    <div class="img-top-titles">\r\n                        <span class="inner-title">{{ sideObject.title }}</span>\r\n                        <span class="profession">{{ sideObject.occupation }}</span>\r\n                    </div>\r\n                </div>\r\n                <div class="ii-content">\r\n                    <div ng-show="sideObject.map" class="text-separator map">\r\n                        <a class="map-btn {{showObjectBlockMap ? \'active\' : \'\'}}" ng-href="{{objectMapUrl}}">\r\n                            <div></div>\r\n                        </a>\r\n                    </div>\r\n                    <div ng-class="{\'first\' : !sideObject.map}" class="text-separator">\r\n                        <p ng-bind-html="sideObject.content | rawHtml" class="objectContent"></p>\r\n                        <div class="clearfix"></div>\r\n                        <div ng-show="sideObject.hasContact || sideObject.hasContactAddress" class="i-contact-info">\r\n                            <div class="info-title"></div>\r\n                            <table>\r\n                                <tr ng-show="sideObject.hasContact">\r\n                                    <td class="ii-text first">{{ sideObject.phone }}</td>\r\n                                    <td class="ii-text second">{{ sideObject.email }}</td>\r\n                                </tr>\r\n                                <tr ng-show="sideObject.hasContactAddress">\r\n                                    <td class="ii-text">{{ sideObject.address.address + \' \' + sideObject.address.city }}</td>\r\n                                </tr>\r\n                            </table>\r\n                        </div>\r\n                        <div class="i-more-info" ng-show="sideObject.more">\r\n\r\n                            <div class="info-title more"></div>\r\n                            <table class="more">\r\n                                <tr ng-repeat="item in sideObject.more">\r\n                                    <td data-type="{{item.type}}" class="ii-text">{{item.key}}:</td>\r\n                                    <td ng-if="item.type == \'checkbox\' || item.type == \'boolean\'" class="ii-text second">{{item.value ? \'v\' : \'x\'}}</td>\r\n                                    <td ng-if="item.type == \'text\'" class="ii-text second">{{item.value}}</td>\r\n                                    <td ng-if="item.type == \'tel\'" class="ii-text second"><a ng-href="tel:{{item.value}}">{{item.value}}</a></td>\r\n                                    <td ng-if="item.type == \'wysiwyg\'" ng-bind-html="item.value | rawHtml" class="ii-text second"></td>\r\n                                </tr>\r\n                            </table>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!--\r\n                        <div class="text-separator">\r\n\r\n                            <table class="item-services">\r\n                                <tr>\r\n                                    <th class="first-col"></th>\r\n                                    <th class="middle-col">Title A</th>\r\n                                    <th class="middle-col">Title B</th>\r\n                                    <th></th>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>parking</td>\r\n                                    <td><span class="bullet"></span></td>\r\n                                    <td></td>\r\n                                    <td></td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>livraison</td>\r\n                                    <td></td>\r\n                                    <td><span class="bullet"></span></td>\r\n                                    <td></td>\r\n                                </tr>\r\n                                <tr>\r\n                                    <td>Koupat Holim</td>\r\n                                    <td><span class="bullet"></span></td>\r\n                                    <td><span class="bullet"></span></td>\r\n                                    <td></td>\r\n                                </tr>\r\n                            </table>\r\n\r\n                        </div>\r\n                    -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div ng-if="showObjectBlock && showObjectBlockMap" class="filter_search_result map object" style="width: 1178px;min-height: 955px;">\r\n        <!--<a ng-click="back()" class="back-btn"></a>-->\r\n        <div id="mapFrame">\r\n            <object-map data-lng="{{ sideObject.lng }}" data-lat="{{ sideObject.lat }}" ng-if="showObjectBlock"></object-map>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),a.put("templates/directives/pageBlock.html",'<div ng-if="pageBlock" class="pageBlock">\r\n    <div ng-switch="currentPage">\r\n        <div ng-switch-when="contact" ng-class="pageBlock && currentPage == \'contact\' ? \'collapsed\' : \'\'" class="contactUs">\r\n            <div scrollbar="{autoUpdate: true,wheelSpeed : 20}" style="max-height: 100%;width: 542px;">\r\n                <div class="inner">\r\n                    <a href="#/" class="back-btn black-b"></a>\r\n                    <span class="inner-title">{{pageContent.title}}</span>\r\n                    <p class="inner-text" ng-bind-html="pageContent.content | rawHtml"></p>\r\n                    <div class="success" ng-show="success">\r\n                        {{successText}}\r\n                    </div>\r\n                    <form ng-hide="success" name="contactForm" novalidate valdr-type="Contact">\r\n                        <div valdr-form-group>\r\n                            <input\r\n                                type="text"\r\n                                placeholder="Nom"\r\n                                ng-model="contact.name"\r\n                                name="name"/>\r\n\r\n                        </div>\r\n                        <div valdr-form-group>\r\n                            <input\r\n                                type="text"\r\n                                placeholder="Téléphone"\r\n                                ng-model="contact.phone"\r\n                                name="phone"/>\r\n                        </div>\r\n                        <div valdr-form-group>\r\n                            <input\r\n                                type="text"\r\n                                placeholder="E-mail"\r\n                                ng-model="contact.email"\r\n                                name="email"/>\r\n                        </div>\r\n                        <div valdr-form-group>\r\n                            <select\r\n                                ng-model="contact.reason"\r\n                                name="reason">\r\n                                <option ng-repeat="v in pageContent.form.reasons" value="{{v.crm_id}}">{{v.content}}</option>\r\n                            </select>\r\n                        </div>\r\n                        <div valdr-form-group>\r\n                            <textarea\r\n                                ng-model="contact.message"\r\n                                name="message"\r\n                                placeholder="Message"></textarea>\r\n                        </div>\r\n                        <div class="error" ng-if="!success && error">\r\n                            {{error}}\r\n                        </div>\r\n                        <input type="submit" class="gold-btn" ng-click="validate(contactForm)" value="Envoyé" />\r\n                        <span class="error-txt" ng-show="notValid">There are some errors / empty fields in the form, please fix them.</span>\r\n\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div ng-switch-when="recommended" ng-class="pageBlock && currentPage == \'recommended\' ? \'collapsed\' : \'\'" class="recommendedDiv imgNtext rd2">\r\n            <div scrollbar="{autoUpdate: true,wheelSpeed : 20}" style="max-height: 100%;width: 542px;height: 855px;">\r\n                <div>\r\n                    <a href="#/" class="back-btn"></a>\r\n                    <div class="top-no-img">\r\n                        <span class="inner-title">{{pageContent.title}}</span>\r\n                        <p class="inner-text" ng-bind-html="pageContent.subTitle | rawHtml"></p>\r\n                    </div>\r\n                    <div class="bottom">\r\n                        <div class="inner-b">\r\n                            <div class="text-separator" ng-repeat="item in pageContent.items">\r\n                                <div class="sm-imgText" ng-if="item.img">\r\n                                    <img ng-src="{{\'images/small-images/\' + item.img}}" />\r\n                                    <div class="inner-smi">\r\n                                        <span class="smi-title">{{item.title}}</span>\r\n                                        <p class="smi-text" ng-bind-html="item.content | rawHtml"></p>\r\n                                        <div class="more-info-div">\r\n                                            <a class="more-info" ng-href="{{item.url}}">More Info</a>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="clearfix"></div>\r\n                                </div>\r\n                                <div ng-if="!item.img">\r\n                                    <span class="ts-title">{{item.title}}</span>\r\n                                    <p class="inner-text" ng-bind-html="item.content | rawHtml"></p>\r\n                                    <div class="more-info-div">\r\n                                        <a class="more-info" ng-href="{{item.url}}">More Info</a>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div ng-switch-when="24news" ng-class="pageBlock && currentPage == \'24news\' ? \'collapsed\' : \'\'" class="channel24 visionDiv imgNtext rd2">\r\n            <a href="#/" class="back-btn"></a>\r\n            <div class="top" lazy-img="{{pageContent.img ? \'/Jini3/images/\'+ pageContent.img : \'\'}}" ng-if="pageContent.img" >\r\n                <!--  ng-attr-style="{{pageContent.img ? \'background-image:url(/Jini3/images/\'+ pageContent.img +\')\' : \'\'}}" -->\r\n            </div>\r\n            <div class="bottom">\r\n                <div class="inner-b" scrollbar="{autoUpdate: true,wheelSpeed : 20}" style="max-height: 100%;padding: 20px;">\r\n                    <div ng-repeat="item in pageContent.items">\r\n                        <span class="inner-title">{{item.title}}</span>\r\n                        <p class="inner-text" ng-bind-html="item.content | rawHtml"></p>\r\n                        <a class="black-btn" ng-href="{{item.url}}" target="_blank">Visiter le site web</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div ng-switch-default ng-class="pageBlock ? \'collapsed\' : \'\'" class="imgNtext visionDiv">\r\n            <a href="#/" class="back-btn"></a>\r\n            <div class="top" lazy-img="{{pageContent.img ? \'/Jini3/images/\'+ pageContent.img : \'\'}}" ng-if="pageContent.img" >\r\n                <!--  ng-attr-style="{{pageContent.img ? \'background-image:url(/Jini3/images/\'+ pageContent.img +\')\' : \'\'}}" -->\r\n            </div>\r\n            <div class="bottom">\r\n                <div class="inner-b" scrollbar="{autoUpdate: true,wheelSpeed : 20}" style="max-height: 100%;padding: 20px;">\r\n                    <span class="inner-title">{{pageContent.title}}</span>\r\n                    <p class="inner-text" ng-bind-html="pageContent.content | rawHtml"></p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),a.put("templates/directives/searchBlock.html",'<div ng-show="showSearchBlock" class="search_results">\r\n    <div class="innerSpinner spinner" ng-hide="center_search_result">\r\n        <div class="double-bounce1"></div>\r\n        <div class="double-bounce2"></div>\r\n    </div>\r\n    <div class="top_strip">\r\n        <span ng-show="center_search_result.count" class="numOfRes"><span class="bold">{{center_search_result.count}}</span> Résultats pour {{keywords.keywords}}</span>\r\n        <span ng-show="!center_search_result.count && keywords.keywords.length" class="numOfRes">Aucun résultat trouvé pour {{keywords.keywords}}</span>\r\n        <span ng-show="!center_search_result.count && !keywords.keywords.length" class="numOfRes">S\'il vous plaît taper quelque chose pour commencer</span>\r\n        <div class="clearfix"></div>\r\n    </div>\r\n    <div class="inner_sr" scrollbar="{autoUpdate: true,wheelSpeed : 20, reFetchOnScroll:true, fetchType: \'searchPage\'}" nextUrl="{{searchPageOffsetCount}}" style="max-height: 100%;width: 435px">\r\n        <div ng-repeat="(catID, catData) in center_search_result.data" class="search_word_sec">\r\n            <a ng-href="{{\'#/\' + catData.id + \'/\' + catData.name + \'/search/\' + keywords.keywords}}" class="sws-title">{{catData.title | cut:true:23:\' ...\'}}</a>\r\n            <span class="numOfRes">{{catData.itemsCount}} résultat</span>\r\n            <div class="category-breadcrumbs">\r\n                <span ng-if="!$last" ng-repeat="(k, v) in allBreadCrumbs[catData.id]">\r\n                    <!--{{v.title}}-->\r\n                    <a ng-href="{{\'#/\' + v.id + \'/\' + v.url}}">{{v.title}}</a>\r\n                    <span ng-if="allBreadCrumbs[catData.id].length - 2 != $index">/</span>\r\n                </span>\r\n            </div>\r\n            <div ng-repeat="item in catData.items" class="text-separator">\r\n                <a ng-href="{{\'#/\' + catData.id + \'-\' + item.id + \'/\' + catData.title + \'/\' + item.name + \'/fromSearch-\' + keywords.keywords}}" class="smi-title">{{item.title | cut:true:35:\' ...\'}}</a>\r\n                <p class="smi-text" ng-if="item.excerpt" ng-bind-html="item.excerpt | cut:true:150:\' ...\' | rawHtml">Apartment description by the owner or advertiser Apartment description by the owner or advertiser...</p>\r\n            </div>\r\n\r\n        </div>\r\n        <div ng-show="searchPageFetchMoreStarted" style="position: relative;width:auto;height: 100px">\r\n            <div class="innerSpinner spinner">\r\n                <div class="double-bounce1"></div>\r\n                <div class="double-bounce2"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),a.put("templates/main/content.html",'<div id="svgContainer" ng-attr-class="{{ showCategoriesBlock || showObjectBlock || showCategorySearchBlock ? \'closed\' : \'\'}}" ng-mouseover="closeMenuOnMouseover()">\r\n    <a title="Accueil" ng-if="parentID == 0" ng-href="#/" class="back-button home"></a>\r\n    <a title="Back to parent Category" ng-if="parentID != 0 && parentID != null" ng-href="{{\'#/\' + parentID.id + \'/\' + parentID.name}}" class="back-button"></a>\r\n    <svg ng-mouseleave="imageOff()" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-2 -2 504 504" id="menu">\r\n        <g id="trigger" class="trigger menu-trigger" role="button">\r\n            <circle cx="250" cy="250" r="110"></circle>\r\n        </g>\r\n        <g id="symbolsContainer">\r\n            <symbol ng-init="currentItem && $first ? openItem(currentItem) : \'\'" ng-repeat="(k, v) in currentCategories"  class="icon icon-" id="icon-{{$index+1}}" viewBox="0 0 40 40">\r\n                <text ng-if="currentCategoriesLength == 2" fill="#222" dx="-30" y="0" dy="-95px" text-anchor="middle" font-size="22px">{{v.newTitle ? v.newTitle[1] : v.title}}</text>\r\n                <text ng-if="currentCategoriesLength == 2 && v.newTitle" fill="#222" dx="-30" y="0" dy="-120px" text-anchor="middle" font-size="22px">{{v.newTitle[0]}}</text>\r\n                <text ng-if="currentCategoriesLength != 2" fill="#222" x="50%" dx="0" y="50%" dy="0px" text-anchor="middle" font-size="16px">{{v.newTitle ? v.newTitle[0] : v.title}}</text>\r\n                <text ng-if="currentCategoriesLength != 2 && v.newTitle" fill="#222" x="50%" dx="0" y="50%" dy="20px" text-anchor="middle" font-size="16px">{{v.newTitle[1]}}</text>\r\n            </symbol>\r\n            <image data-svg-origin="250 250" id="featuredImage" width="200" height="200" x="150" y="150" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="" ng-href="{{centerImage ? mediaUrl + centerImage : \' \'}}" style="transform-origin: 0px 0px 0px; transform: matrix(0.99999, 0, 0, 0.99999, 0.00216995, -0.000230047);"></image>\r\n        </g>\r\n        <g id="itemsContainer">\r\n            <a ng-repeat="(k, v) in currentCategories" ng-class="{{ currentID == k ? \'current\' : \'\'}}" ng-attr-data-category-id="{{k}}" ng-init="$last ? fixPie() : \'\'" ng-click="currentItem && currentItem.id == v.id ? openItem(currentItem) : \'\'" ng-attr-target="{{v.target}}" ng-href="{{v.url ? v.url : \'#/\' + k + \'/\' + v.name}}" ng-mouseover="imageOn(v);categoryHoverHelper(v)" ng-mouseout="disableCategoryHover(v.id)" class="item" id="item-{{$index+1}}" data-title="{{v.title}}" data-featured-image="{{v.featuredImageUrl}}" data-content-image="{{v.contentImageUrl}}" role="link" tabindex="0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href=" " ng-attr-transform="{{pie[currentCategoriesLength].transform_a[$index]}}" data-svg-origin="{{pie[currentCategoriesLength].global.svgOrigin}}" ng-attr-style="{{ isFirst ? \'transform: matrix(0, 0, 0, 0, 250, 250);\' : \'\'}}">\r\n                <path fill="none" stroke="#111" ng-attr-d="{{pie[currentCategoriesLength].global.d}}" class="sector {{!isFirst ? \'opacity\' : \'\'}}"></path>\r\n                <use xlink:href="" ng-href="#icon-{{$index+1}}" width="40" height="40" ng-attr-x="{{pie[currentCategoriesLength].global.x}}" ng-attr-y="{{pie[currentCategoriesLength].global.y}}" ng-attr-transform="{{pie[currentCategoriesLength].transform_b[$index]}}"></use>\r\n            </a>\r\n        </g>\r\n    </svg>\r\n    <span class="itemsTooltip">\r\n        For More Information Click here\r\n        <img src="../../images/arrow-left.png" />\r\n    </span>\r\n</div>\r\n<search-block></search-block>\r\n<categories-search-block></categories-search-block>\r\n<page-block></page-block>');
}]);