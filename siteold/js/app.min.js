function Config(a,b,c){console.log("Config"),b.otherwise("/"),a.state("home",{cache:!0,url:"/",controller:"HomeController",templateUrl:"templates/categories/8.html",resolve:{categories:["CategoryService","$stateParams",function(a,b){return console.log("CALL: resolve.categories1"),a.getCategories(b)}],setScope:["$rootScope","$state","$stateParams","categories","setScopeService",function(a,b,c,d,e){return console.log("CALL: resolve.setScope1"),e.init(a,b,c,d)}]}}).state("searchInCategory",{cache:!0,url:"/{id:[1-9][0-9]*}/{title:.*?}/search/{search:.+}",controller:"SearchController",templateUrl:"templates/categories/8.html",resolve:{categories:["CategoryService","$stateParams",function(a,b){return console.log("CALL: resolve.categories5"),a.getCategories(b)}],setScope:["$rootScope","$state","$stateParams","categories","setScopeService",function(a,b,c,d,e){return console.log("CALL: resolve.setScope5"),e.init(a,b,c,d)}]}}).state("category",{cache:!0,url:"/{id:[1-9][0-9]*}/{title:.*}",controller:"CategoryController",templateUrl:"templates/categories/8.html",resolve:{categories:["CategoryService","$stateParams",function(a,b){return console.log("CALL: resolve.categories2"),a.getCategories(b)}],setScope:["$rootScope","$state","$stateParams","categories","setScopeService",function(a,b,c,d,e){return console.log("CALL: resolve.setScope2"),e.init(a,b,c,d)}]}}).state("object",{cache:!0,url:"/{id:[0-9][0-9]*}-{id2:[1-9][0-9]*}/{title:.*}/{title2:.*}",controller:"CategoryController",templateUrl:"templates/categories/8.html",resolve:{categories:["CategoryService","$stateParams",function(a,b){return console.log("CALL: resolve.categories3"),a.getCategories(b)}],setScope:["$rootScope","$state","$stateParams","categories","setScopeService",function(a,b,c,d,e){return console.log("CALL: resolve.setScope3"),e.init(a,b,c,d)}],object:["$stateParams","objectService","setScope","$rootScope",function(a,b,c,d){return console.log("CALL: resolve.object3",c),d.currentItem=!1,b.getObjectData(a).then(function(a){return a.type="object",d.openItem(a,"object"),!0})}]}}).state("search",{cache:!0,url:"/search/{search:.+}",controller:"SearchController",templateUrl:"templates/categories/8.html",resolve:{categories:["CategoryService","$stateParams",function(a,b){return console.log("CALL: resolve.categories4"),a.getCategories(b)}],setScope:["$rootScope","$state","$stateParams","categories","setScopeService",function(a,b,c,d,e){return console.log("CALL: resolve.setScope4"),e.init(a,b,c,d)}]}})}function Run(a,b,c,d,e,f){a.$on("$stateChangeStart",function(a,b){})}function CategoryController(a,b,c,d,e){console.log("CategoryControllerLoaded. ID:",c.id),console.log("CategoryController",d.current),b.currentID=c.id}function HomeController(a,b){console.log("HomeController!"),a.pie=b}function MainController(a,b,c,d,e,f,g){console.log("MainController"),b.siteUrl="/Jini3/#",b.mediaUrl="/COMPIE/jini3/public/uploads/";var h=[];b.$on("$locationChangeSuccess",function(){h.push(f.$$path)}),b.back=function(){var a=h.length>1?h.splice(-2)[0]:"/";f.path(a),h=[]},b.pie=c,b.fixPie=function(){d.init(b.currentCategoriesLength,b.isFirst)},b.centerImage="../img/no_selector.png",b.imageOn=function(a){b.centerImage=a.featuredImageUrl},b.imageOff=function(){b.centerImage="../img/no_selector.png"};var i=[],j=[],k=[];b.showCategoryBlock=!1,b.showObjectBlock=!1,b.showCategoriesBlock=!1;var l=!1;b.openItem=function(c,d){if("search"==a.current.name||"searchInCategory"==a.current.name&&"object"!=d)return b.displayHandle.closeAll(),!1;if(b.showCategorySearchBlock=g.showSearchBlock=b.top_search_result=b.center_search_result=b.category_search_result=!1,l=!0,setTimeout(function(){l=!1},500),console.log("openItem",c),!Object.keys(c).length)return void b.leftBlocksHandler.homePageView();switch(c.type){case"object":b.leftBlocksHandler.objectView(c);break;case"category":console.log("case 'category':",c,c.items_count),c.items_count?b.leftBlocksHandler.categoryHover(c,!0):b.leftBlocksHandler.categoryList(c)}},b.leftBlocksHandler={categoryHover:function(c,d){return"search"==a.current.name||"searchInCategory"==a.current.name?(b.displayHandle.closeAll(),!1):"undefined"==typeof d&&l?!1:(b.displayHandle.showCategoryOrHomePage(),void b.showCategoryHover(c))},categoryList:function(a){b.displayHandle.showCategoryList(),b.showCategoryList(a)},objectView:function(a){b.displayHandle.showObject(),b.showObject(a)},homePageView:function(){b.displayHandle.showCategoryOrHomePage(),b.showHomePageBlock()}},b.displayHandle={showCategoryOrHomePage:function(){console.log("showCategoryOrHomePage"),b.showCategoriesBlock=!1,b.showCategoryBlock=!0,b.showObjectBlock=!1},showCategoryList:function(){console.log("showCategoryList"),b.showCategoriesBlock=!0,b.showCategoryBlock=!1,b.showObjectBlock=!1},showObject:function(){console.log("showObject"),b.showCategoriesBlock=!1,b.showCategoryBlock=!1,b.showObjectBlock=!0},closeAll:function(){console.log("closeAll"),b.showCategoryBlock=b.showObjectBlock=b.showCategoriesBlock=!1}},b.showCategoryHover=function(a){var c=a.id;i[c]?b.sideCategory=i[c]:(b.sideCategory=i[c]={id:c,title:a.title,img:a.contentImageUrl,items_count:a.items_count?!0:!1,content:!1},e.get("/COMPIE/jini3/public/categories/"+c+"/content").then(function(a){b.sideCategory.content=i[c].content=a.data}))},b.showCategoryList=function(a){var c=a.id;j[c]?b.sideCategories=j[c]:e.get("/COMPIE/jini3/public/objects/search?categoryid="+c+"&index=100").then(function(a){b.sideCategories=j[c]=a})},b.showObject=function(a){var c=a.id;k[c]?b.sideObject=k[c]:k[c]=b.sideObject=a},b.showHomePageBlock=function(){b.displayHandle.showCategoryOrHomePage(),i[0]?b.sideCategory=i[0]:b.sideCategory=i[0]={id:"0",title:"Home page",img:!1,content:"This is the home page example data!"}},b.closeOnMouseover=function(){return l?!1:void((b.showCategoriesBlock||b.showObjectBlock)&&b.displayHandle.closeAll())},b.showCategoriesMap=function(){return b.showCategoriesBlock?b.showCategoriesBlockMap?!0:(b.showCategoriesBlockList=!1,void(b.showCategoriesBlockMap=!0)):!1},b.showCategoriesList=function(){return b.showCategoriesBlock?b.showCategoriesBlockList?!0:(b.showCategoriesBlockList=!0,void(b.showCategoriesBlockMap=!1)):!1};var m,n="/COMPIE/jini3/public/objects/search?query=",o="/COMPIE/jini3/public/objects/searchPage?query=",p=!1,q={page:[],regular:[]};b.search=function(){return p&&clearTimeout(m),p=!0,m=setTimeout(function(){console.log(g.keywords),"search"==a.current.name?(b.top_search_result=!1,q.page[g.keywords]?b.center_search_result=q.page[g.keywords]:e.get(o+g.keywords).then(function(a){q.page[g.keywords]=b.center_search_result=a.data})):"searchInCategory"==a.current.name?(b.top_search_result=b.center_search_result=!1,q.page[g.keywords+"|"+a.params.id]?b.category_search_result=q.page[g.keywords+"|"+a.params.id]:e.get(o+g.keywords+"&categoryid="+a.params.id).then(function(c){q.page[g.keywords+"|"+a.params.id]=b.category_search_result=c.data})):q.regular[g.keywords]?b.top_search_result=q.page[g.keywords]:e.get(n+g.keywords).then(function(a){q.page[g.keywords]=b.top_search_result=a.data}),p=!1},500),!1},b.clearSearch=function(){g.keywords=null,b.top_search_result=!1},b.changeUrl=function(){return"search"==a.current.name?g.keywords.length>=1&&f.path("/search/"+g.keywords):"searchInCategory"==a.current.name?g.keywords.length>=1&&f.path("/"+a.params.id+"/"+a.params.title+"/search/"+g.keywords):b.search(),!1},b.showCategoriesSearchMap=function(){return console.log("clicked!showCategoriesSeacrhMap"),b.showCategorySearchBlock?b.showCategoriesSearchBlockMap?!0:(b.showCategoriesSearchBlockList=!1,void(b.showCategoriesSearchBlockMap=!0)):!1},b.showCategoriesSearchList=function(){return console.log("clicked!showCategoriesList"),b.showCategorySearchBlock?b.showCategoriesSearchBlockList?!0:(b.showCategoriesSearchBlockList=!0,void(b.showCategoriesSearchBlockMap=!1)):!1}}function SearchController(a,b,c){console.log("SearchControllerLoaded. ID:"),b.keywords=a.search=c.search,a.currentID=c.id||0,a.currentID?(b.showCategorySearchBlock=!0,a.showSearchBlock=!1):(a.showSearchBlock=!0,b.showCategorySearchBlock=!1),b.search()}function setScopeService(){return{init:function(a,b,c,d){console.log("CALL: setScopeService");var e=c.id||0;a.currentBreadCrumbs=d.breadcrumbs[e];var f=d.parents[e];return d.categories.length&&"undefined"==typeof f&&b.go("home"),a.currentCategories=getCategoriesByParentArray(d.categories,f.slice()),a.currentCategoriesLength=Object.keys(a.currentCategories).length,console.log("$rootScope.currentCategories:",a.currentCategories),a.currentItem=getCurrentCategoryByParentArray(d.categories,f.slice()),0!=e&&(a.currentItem.type="category"),console.log("$rootScope.currentItem",a.currentItem),0==f.length?a.parentID=null:f.length<=1?a.parentID=0:a.parentID=f[f.length-2],a.currentCategories=splitCurrentCategoriesTitle(a.currentCategories),!0}}}function CategoryService(a,b,c){var d={};return d.getCategories=function(e){if(c.isFirst=!1,d.categoriesData)return d.categoriesData;var f=e.id||0;return d.categoriesData=a.get("/COMPIE/jini3/public/categories/"+f+"/categories").then(function(a){return("undefined"==typeof a.data.parents||"undefined"==typeof a.data.parents[f])&&b.go("home"),c.isFirst=!0,a.data})},d}function objectService(a){var b={};return b.objectData=[],b.getObjectData=function(c){var d=c.id2||0;return b.objectData[d]?b.objectData[d]:b.objectData[d]=a.get("/COMPIE/jini3/public/objects/"+d).then(function(a){return console.log(a.data),a.data})},b}function fixPie(a){return{init:function(a,b){this.rotateCircle(a),this.rotateImage(a),b&&this.openCircle(a)},rotateCircle:function(b){var c=!1;switch(b){case 3:c=-30;break;case 4:c=-45;break;case 5:c=-55;break;case 6:c=-60;break;case 7:c=-65;break;case 8:c=-67;break;case 9:c=-70;break;case 10:c=-71}c&&TweenLite.set(a[0].querySelector("#menu"),{rotation:c,transformOrigin:"50% 50%"})},rotateImage:function(b){var c=!1;switch(b){case 2:c=-0;break;case 3:c=30;break;case 5:c=55;break;case 4:c=45;break;case 6:c=60;break;case 7:c=65;break;case 8:c=67;break;case 9:c=70;break;case 10:c=71}c&&TweenLite.set(a[0].querySelector("#featuredImage"),{rotation:c,transformOrigin:"50% 50%"})},openCircle:function(b){var c=b,d=a[0].querySelector("#menu"),e=d.querySelectorAll(".item"),f=360/c,g=new TimelineLite;g.to(e,.2,{scale:1,ease:Back.easeOut.config(4)},.05);for(var h=0;h<e.length;h++)g.to(e[h],.7,{rotation:-h*f+"deg"},.35);setTimeout(function(){for(var a=0;a<e.length;a++)e[a].querySelectorAll(".sector")[0].style.opacity="0.8",e[a].querySelectorAll(".sector")[0].style.transition="all .2s linear"},1e3)}}}function pie(){return{2:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 0.03084187958484108,246.07317067204482 l134.9833453850242,2.1204878370957942 A115,115 0 0,1 365,250",x:"280.0154113769531",y:"178.03659057617188"},transform_a:["rotate(0 250 250)","rotate(-180 250 250)"],transform_b:["rotate(0 300.0154113769531 198.03659057617188)","rotate(180 250.0154113769531 80.03659057617188)"]},3:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 127.27406159621479,32.196547219952635 l66.272006738044,117.61386450122558 A115,115 0 0,1 365,250",x:"339.0684509277344",y:"77.48664855957031"},transform_a:["rotate(0 250 250)","rotate(-120 250 250)","rotate(-240 250 250)"],transform_b:["rotate(30 359.0684509277344 97.48664855957031)","rotate(-140 359.0684509277344 97.48664855957031)","rotate(-140 359.0684509277344 97.48664855957031)"]},4:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 251.96347522217783,0.007710588802581242 l-1.0602766199760367,134.9958362820466 A115,115 0 0,1 365,250",x:"355.98175048828125",y:"105.00385284423828"},transform_a:["rotate(0 250 250)","rotate(-90 250 250)","rotate(-180 250 250)","rotate(-270 250 250)"],transform_b:["rotate(45 375.98175048828125 125.00385284423828)","rotate(45 375.98175048828125 125.00385284423828)","rotate(-135 375.98175048828125 125.00385284423828)","rotate(45 375.98175048828125 125.00385284423828)"]},5:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 328.7466299138262,12.725963752426338 l-42.52318015346617,128.12797957368977 A115,115 0 0,1 365,250",x:"382.0361633300781",y:"120.26736450195312"},transform_a:["rotate(0 250 250)","rotate(-72 250 250)","rotate(-144 250 250)","rotate(-216 250 250)","rotate(-288 250 250)"],transform_b:["rotate(55 402.0361633300781 140.26736450195312)","rotate(55 402.0361633300781 140.26736450195312)","rotate(-125 402.0361633300781 140.26736450195312)","rotate(-125 402.0361633300781 140.26736450195312)","rotate(55 402.0361633300781 140.26736450195312)"]},6:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 376.1319059537548,34.151112348307095 l-68.1112292150276,116.55839933191416 A115,115 0 0,1 365,250",x:"392.6246337890625",y:"136.67543029785156"},transform_a:["rotate(0 250 250)","rotate(-60 250 250)","rotate(-120 250 250)","rotate(-180 250 250)","rotate(-240 250 250)","rotate(-300 250 250)"],transform_b:["rotate(60 412.6246337890625 156.67543029785156)","rotate(60 412.6246337890625 156.67543029785156)","rotate(-120 412.6246337890625 156.67543029785156)","rotate(-120 412.6246337890625 156.67543029785156)","rotate(-120 412.6246337890625 156.67543029785156)","rotate(60 412.6246337890625 156.67543029785156)"]},7:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 406.7480905992045,55.243649414188354 l-84.64396892357041,105.16842931633829 A115,115 0 0,1 365,250",x:"399.1138000488281",y:"149.02609252929688"},transform_a:["rotate(0 250 250)","rotate(-51.42857142857143 250 250)","rotate(-102.85714285714286 250 250)","rotate(-154.28571428571428 250 250)","rotate(-205.71428571428572 250 250)","rotate(-257.14285714285717 250 250)","rotate(-308.57142857142856 250 250)"],transform_b:["rotate(65 419.1138000488281 169.02609252929688)","rotate(65 419.1138000488281 169.02609252929688)","rotate(-115 419.1138000488281 169.02609252929688)","rotate(-115 419.1138000488281 169.02609252929688)","rotate(-115 419.1138000488281 169.02609252929688)","rotate(-115 419.1138000488281 169.02609252929688)","rotate(65 419.1138000488281 169.02609252929688)"]},8:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 427.4695309138226,73.91886643587344 l-95.8335466934642,95.08381212462837 A115,115 0 0,1 365,250",x:"403.3679504394531",y:"158.58712768554688"},transform_a:["rotate(0 250 250)","rotate(-45 250 250)","rotate(-90 250 250)","rotate(-135 250 250)","rotate(-180 250 250)","rotate(-225 250 250)","rotate(-270 250 250)","rotate(-315 250 250)"],transform_b:["rotate(67 423.3679504394531 178.58712768554688)","rotate(67 423.3679504394531 178.58712768554688)","rotate(67 423.3679504394531 178.58712768554688)","rotate(-115 423.3679504394531 178.58712768554688)","rotate(-115 423.3679504394531 178.58712768554688)","rotate(-115 423.3679504394531 178.58712768554688)","rotate(67 423.3679504394531 178.58712768554688)","rotate(67 423.3679504394531 178.58712768554688)"]},9:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 442.0708808983809,89.97257512876115 l-103.71827568512572,86.41480943046898 A115,115 0 0,1 365,250",x:"406.30401611328125",y:"166.1788330078125"},transform_a:["rotate(0 250 250)","rotate(-40 250 250)","rotate(-80 250 250)","rotate(-120 250 250)","rotate(-160 250 250)","rotate(-200 250 250)","rotate(-240 250 250)","rotate(-280 250 250)","rotate(-320 250 250)"],transform_b:["rotate(70 426.30401611328125 186.1788330078125)","rotate(70 426.30401611328125 186.1788330078125)","rotate(70 426.30401611328125 186.1788330078125)","rotate(-115 426.30401611328125 186.1788330078125)","rotate(-115 426.30401611328125 186.1788330078125)","rotate(-115 426.30401611328125 186.1788330078125)","rotate(-115 426.30401611328125 186.1788330078125)","rotate(70 426.30401611328125 186.1788330078125)","rotate(70 426.30401611328125 186.1788330078125)"]},10:{global:{svgOrigin:"250 250",d:"M365,250 l135,0 A250,250 0 0,0 452.71489520809337,103.6898114936225 l-109.46604341237042,79.00750179344385 A115,115 0 0,1 365,250",x:"408.41387939453125",y:"172.33949279785156"},transform_a:["rotate(0 250 250)","rotate(-36 250 250)","rotate(-72 250 250)","rotate(-108 250 250)","rotate(-144 250 250)","rotate(-180 250 250)","rotate(-216 250 250)","rotate(-252 250 250)","rotate(-288 250 250)","rotate(-324 250 250)"],transform_b:["rotate(72 428.41387939453125 192.33949279785156)","rotate(72 428.41387939453125 192.33949279785156)","rotate(72 428.41387939453125 192.33949279785156)","rotate(-109 428.41387939453125 192.33949279785156)","rotate(-109 428.41387939453125 192.33949279785156)","rotate(-109 428.41387939453125 192.33949279785156)","rotate(-109 428.41387939453125 192.33949279785156)","rotate(72 428.41387939453125 192.33949279785156)","rotate(72 428.41387939453125 192.33949279785156)","rotate(72 428.41387939453125 192.33949279785156)"]}}}function split2s(a,b){var c=a.indexOf(b);return-1!==c?[a.substring(0,c),a.substring(c+1)]:[a]}function replaceAll(a,b,c){return c.replace(new RegExp(a,"g"),b)}function splitCurrentCategoriesTitle(a){for(i in a){var b=replaceAll("/","",a[i].title);b=replaceAll("-","",b);var c=split2s(b," ");a[i].newTitle=c.length>1?c:!1}return a}function getCategoriesByParentArray(a,b){if(0!=b.length){var c=b[0];b.shift(),a[c].items_count&&(a=getCategoriesByParentArray(a[c].items,b))}return a}function getCurrentCategoryByParentArray(a,b){if(1==b.length)currentCategory={id:b[0],title:a[b[0]].title,contentImageUrl:a[b[0]].contentImageUrl,items_count:a[b[0]].items_count?!0:!1,contetnt:!1};else if(0==b.length)currentCategory={};else{var c=b[0];b.shift(),currentCategory=getCurrentCategoryByParentArray(a[c].items,b)}return currentCategory}function getCategoriesByParentArray2(a,b){if(0!=b.length)for(var c=0;c<a.length;c++)if(a[c].id==b[0]){if(b.shift(),!a[c].items_count)break;a=getCategoriesByParentArray(a[c].items,b)}return a}angular.module("JINI",["ui.router","ngStorage","ngMessages","JINI.controllers","JINI.directives","JINI.filters","JINI.services","JINI.templates"]).config(Config).run(Run),Config.$inject=["$stateProvider","$urlRouterProvider","$localStorageProvider"],Run.$inject=["$rootScope","$state","$localStorage","$sessionStorage","$window","$http"],angular.module("JINI.controllers",[]),angular.module("JINI.controllers").controller("CategoryController",["$rootScope","$scope","$stateParams","$state","$http",CategoryController]),angular.module("JINI.controllers").controller("HomeController",["$scope","pie",HomeController]),angular.module("JINI.controllers").controller("MainController",MainController),MainController.$inject=["$state","$rootScope","pie","fixPie","$http","$location","$scope"],angular.module("JINI.controllers").controller("SearchController",["$scope","$rootScope","$stateParams",SearchController]),angular.module("JINI.directives",[]).directive("categoryhover",function(){return{restrict:"EA",replace:!0,templateUrl:"templates/directives/categoryHover.html"}}).directive("objectblock",function(){return{restrict:"EA",replace:!0,templateUrl:"templates/directives/objectBlock.html"}}).directive("categoriesblock",function(){return{restrict:"EA",replace:!0,templateUrl:"templates/directives/categoriesBlock.html"}}).directive("categoriesSearchBlock",function(){return{restrict:"EA",replace:!0,templateUrl:"templates/directives/categoriesBlockSearch.html"}}).directive("myMap",["$http",function(a){var b=[],c=function(c,d,e){function f(){void 0===i&&(i=new google.maps.Map(d[0],l))}function g(a,b,c){var d=new google.maps.Marker({map:i,position:a,animation:google.maps.Animation.DROP});c&&d.setIcon(c),""!=b&&"undefined"!=typeof b&&(d.info=b,k.push(d),google.maps.event.addListener(d,"click",function(){void 0!==j&&j.close();var a={content:d.info,maxWidth:512,height:264};j=new google.maps.InfoWindow(a),j.open(i,d)}))}function h(a){for(var b=0;b<a.data.length;b++){var d=a.data[b];1==d.promoted?iconUrl="/COMPIE/jini3/public/img/icons/map_pin_promoted_xs.png":iconUrl="/COMPIE/jini3/public/img/icons/map_pin_xs.png";var e='<a href="#/'+c.currentItem.id+"-"+d.id+"/"+c.currentItem.title+"/"+d.title+'" class="marker-popup'+(d.content_image?"":" no-content-image")+'"><div class="top-pane" style="background-image: url('+d.content_image+');"></div>   <div class="main-pane">       <div class="row heading">           <div class="col-md-12">               <h2 class="title">'+d.title+'</h2>           </div>       </div>       <div class="row heading">           <div class="col-md-12">               <div class="content">'+d.excerpt+'</div>           </div>       </div>       <div class="row actions actions-pane">           <div class="pull-left"><span class="address">'+d.address_street+" "+d.address_city+'</span></div>           <div class="pull-right"><button class="book-button">Book</button></div>       </div>   </div>   <button class="close-button"></button></div></div>';g(new google.maps.LatLng(d.geo_latitude,d.geo_longitude),e,iconUrl)}}var i,j,k=[],l={center:new google.maps.LatLng(31.9026026,34.946152,9.75),zoom:10,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0,scrollwheel:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER,style:google.maps.ZoomControlStyle.LARGE}};f();var m=c.currentItem.id;console.log(c.search,typeof c.search);var n="undefined"!=typeof c.search&&"function"!=typeof c.search?c.search:"";b[m+n]?h(b[m+n]):a.get("/COMPIE/jini3/public/objects/locations?categoryid="+m+(n?"&query="+n:"")).then(function(a){console.log("getMapData",a.data),b[m+n]=a.data,console.log(b[m+n]),h(b[m+n])})};return{restrict:"EA",template:'<div id="gmaps" style="width: 1178px; height: 980px;"></div>',replace:!0,link:c}}]).directive("enterSubmit",["$location",function(a){return{restrict:"A",link:function(b,c,d){c.bind("keydown",function(b){var d=b.keyCode||b.which;13===d&&a.path("/search/"+c.val())})}}}]).directive("searchBlock",function(){return{restrict:"EA",replace:!0,templateUrl:"templates/directives/searchBlock.html"}}),angular.module("JINI.services",[]).factory("pie",pie).factory("fixPie",["$document",fixPie]).factory("CategoryService",["$http","$state","$rootScope",CategoryService]).factory("setScopeService",setScopeService).factory("objectService",["$http",objectService]),angular.module("JINI.filters",[]).filter("rawHtml",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]).filter("cut",function(){return function(a,b,c,d){if(!a)return"";if(c=parseInt(c,10),!c)return a;if(a.length<=c)return a;if(a=a.substr(0,c),b){var e=a.lastIndexOf(" ");-1!=e&&(a=a.substr(0,e))}return a+(d||" ï¿½")}}),angular.module("JINI.templates",[]),angular.module("JINI.templates").run(["$templateCache",function(a){"use strict";a.put("templates/categories/8.html",'<search-block></search-block>\r\n<categories-search-block></categories-search-block>\r\n\r\n<div id="breadcrumbs">\r\n    <ul>\r\n        <li ng-class="{{!currentBreadCrumbs.length ? \'current\' : \'\'}}">\r\n            <a ng-if="currentBreadCrumbs.length" href="#/">\r\n                Home\r\n            </a>\r\n            <span ng-if="!currentBreadCrumbs.length">\r\n                Home\r\n            </span>\r\n        </li>\r\n        <li ng-repeat="(k, v) in currentBreadCrumbs">\r\n            <a ng-if="!$last" ng-href="{{\'#/\' + v.id + \'/\' + v.url}}">{{v.title}}</a>\r\n            <span ng-if="$last">{{v.title}}</span>\r\n        </li>\r\n    </ul>\r\n</div>\r\n<div id="demo-wrapper" ng-attr-class="{{ showCategoriesBlock || showObjectBlock ? \'closed\' : \'\'}}" ng-mouseover="closeOnMouseover()" style="">\r\n\r\n    <a title="Go Home" ng-if="parentID == 0" ng-href="#/" class="back-button"></a>\r\n    <a title="Back to parent Category" ng-if="parentID != 0 && parentID != null" ng-href="#/{{ parentID }}/" class="back-button"></a>\r\n    <!-- SVG Menu Generated By CIRCULUS.SVG :: http://sarasoueidan.com/tools/circulus -->\r\n    <svg ng-mouseleave="imageOff()" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-2 -2 504 504" id="menu">\r\n        <g id="trigger" class="trigger menu-trigger" role="button">\r\n            <circle cx="250" cy="250" r="110"></circle>\r\n        </g>\r\n        <g id="symbolsContainer">\r\n            <symbol ng-init="currentItem && $first ? openItem(currentItem) : \'\'" ng-repeat="(k, v) in currentCategories"  class="icon icon-" id="icon-{{$index+1}}" viewBox="0 0 40 40">\r\n                <text ng-if="currentCategoriesLength == 2" fill="#222" dx="-30" y="0" dy="-115px" text-anchor="middle" font-size="22px">{{v.title}}</text>\r\n                <text ng-if="currentCategoriesLength != 2" fill="#222" x="50%" dx="0" y="50%" dy="0px" text-anchor="middle" font-size="16px">{{v.newTitle ? v.newTitle[0] : v.title}}</text>\r\n                <text ng-if="currentCategoriesLength != 2 && v.newTitle" fill="#222" x="50%" dx="0" y="50%" dy="20px" text-anchor="middle" font-size="16px">{{v.newTitle[1]}}</text>\r\n            </symbol>\r\n            <image data-svg-origin="250 250" id="featuredImage" width="200" height="200" x="150" y="150" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="" ng-href="{{centerImage ? mediaUrl + centerImage : \' \'}}" style="transform-origin: 0px 0px 0px; transform: matrix(0.99999, 0, 0, 0.99999, 0.00216995, -0.000230047);"></image>\r\n        </g>\r\n        <g id="itemsContainer">\r\n            <a ng-repeat="(k, v) in currentCategories" ng-class="{{ currentID == k ? \'current\' : \'\'}}" ng-attr-data-category-id="{{k}}" ng-init="$last ? fixPie() : \'\'" ng-click="currentItem && currentItem.id == v.id ? openItem(currentItem) : \'\'" ng-href="{{\'#/\' + k + \'/\' + v.name}}" ng-mouseover="imageOn(v);leftBlocksHandler.categoryHover(v)" class="item" id="item-{{$index+1}}" data-title="{{v.title}}" data-featured-image="{{v.featuredImageUrl}}" data-content-image="{{v.contentImageUrl}}" role="link" tabindex="0" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href=" " xlink:title="{{v.title}}" ng-attr-transform="{{pie[currentCategoriesLength].transform_a[$index]}}" data-svg-origin="{{pie[currentCategoriesLength].global.svgOrigin}}" ng-attr-style="{{ isFirst ? \'transform: matrix(0, 0, 0, 0, 250, 250);\' : \'\'}}">\r\n                <path fill="none" stroke="#111" ng-attr-d="{{pie[currentCategoriesLength].global.d}}" class="sector {{!isFirst ? \'opacity\' : \'\'}}"></path>\r\n                <use xlink:href="" ng-href="#icon-{{$index+1}}" width="40" height="40" ng-attr-x="{{pie[currentCategoriesLength].global.x}}" ng-attr-y="{{pie[currentCategoriesLength].global.y}}" ng-attr-transform="{{pie[currentCategoriesLength].transform_b[$index]}}"></use>\r\n            </a>\r\n        </g>\r\n    </svg>\r\n\r\n</div>'),a.put("templates/directives/categoriesBlock.html",'<div>\r\n    <div class="search-criteria-pane-wrapper pane-wrapper{{showCategoriesBlock ? \' collapsed\' : \'\'}}">\r\n        <div class="search-criteria-pane pane">\r\n            <h2 class="title">Filter results in <span class="criteria">{{currentItem.title}}</span></h2>\r\n            <button class="close-button">&nbsp;</button>\r\n            <ul class="view-mode">\r\n                <li>\r\n                    <button ng-class="showCategoriesBlockMap ? \'active\' : \'\'" class="map-view-button" ng-click="showCategoriesMap();"></button>\r\n                </li>\r\n                <li>\r\n                    <button ng-class="showCategoriesBlockList ? \'active\' : \'\'" class="list-view-button " ng-click="showCategoriesList()">&nbsp;</button>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div class="search-results-pane-wrapper pane-wrapper{{showCategoriesBlock && showCategoriesBlockList ? \' collapsed\' : \'\'}}">\r\n        <div class="search-results-pane pane">\r\n            <h2 class="title"><span class="criteria">{{currentItem.title}} ({{sideCategories.data.length}})</span></h2>\r\n            <div class="info-content">\r\n                <div class="content">\r\n                    <ul>\r\n                        <li ng-repeat="(k, v) in sideCategories.data">\r\n                            <div class="row">\r\n                                <div class="col-md-5">\r\n                                    <img src="{{mediaUrl + v.featured_image}}" class="thumb">\r\n                                </div>\r\n                                <div class="col-md-7 no-padding">\r\n                                    <div class="content">\r\n                                        <h3>{{v.title}}</h3>\r\n\r\n                                        <p class="excerpt" ng-if="v.content" ng-bind-html="v.content | rawHtml"></p>\r\n                                        <a ng-click="closeCategories()" ng-href="{{\'#/\' + currentItem.id + \'-\' + v.id + \'/\' + currentItem.title + \'/\' + v.name}}" class="more-button{{v.promoted ? \' promoted\' : \'\'}}"><span>More Info</span></a>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="row actions">\r\n                                <div class="col-md-4">\r\n                                    <button class="map-button">View on map</button>\r\n                                </div>\r\n                                <div class="col-md-4 no-padding">\r\n                                    <button class="wishlist-button">Add to wishlist</button>\r\n                                </div>\r\n                                <div class="col-md-4">\r\n                                    <button class="book-button">Book now</button>\r\n                                </div>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <button class="close-button">&nbsp;</button>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="search-results-pane-wrapper-1 pane-wrapper{{showCategoriesBlock && showCategoriesBlockMap ? \' collapsed\' : \'\'}}">\r\n        <div class="search-results-pane-1 pane">\r\n            <div id="mapFrame">\r\n                <my-map ng-if="showCategoriesBlock"></my-map>\r\n            </div>\r\n            <button class="close-button">&nbsp;</button>\r\n        </div>\r\n    </div>\r\n</div>'),a.put("templates/directives/categoriesBlockSearch.html",'<div class="categoriesBlock" ng-attr-style="{{!showCategorySearchBlock ? \'display:none;\' : \'\'}}">\r\n    <div class="search-criteria-pane-wrapper pane-wrapper{{showCategorySearchBlock ? \' collapsed\' : \'\'}}">\r\n        <div class="search-criteria-pane pane">\r\n            <h2 style="direction: ltr" class="title">Filter results in <span class="criteria">{{currentItem.title}}</span> for search: <strong>{{keywords}}</strong>, total results: <strong>{{category_search_result.length}}</strong></h2>\r\n            <button class="close-button">&nbsp;</button>\r\n            <ul class="view-mode">\r\n                <li>\r\n                    <button ng-class="showCategoriesSearchBlockMap ? \'active\' : \'\'" class="map-view-button" ng-click="showCategoriesSearchMap();"></button>\r\n                </li>\r\n                <li>\r\n                    <button ng-class="showCategoriesSearchBlockList ? \'active\' : \'\'" class="list-view-button " ng-click="showCategoriesSearchList()">&nbsp;</button>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div class="search search-results-pane-wrapper pane-wrapper{{showCategorySearchBlock && showCategoriesSearchBlockList ? \' collapsed\' : \'\'}}">\r\n        <div class="search-results-pane pane">\r\n            <h2 class="title"><span class="criteria">{{currentItem.title}} ({{category_search_result.length}})</span></h2>\r\n            <div class="info-content">\r\n                <div class="content">\r\n                    <ul>\r\n                        <li ng-repeat="(k, v) in category_search_result">\r\n                            <div class="row">\r\n                                <div class="col-md-5">\r\n                                    <img ng-src="{{content_image ? content_image : mediaUrl + v.featured_image}}" class="thumb">\r\n                                </div>\r\n                                <div class="col-md-7 no-padding">\r\n                                    <div class="content">\r\n                                        <h3>{{v.title}}</h3>\r\n\r\n                                        <p class="excerpt" ng-if="v.content" ng-bind-html="v.content | rawHtml"></p>\r\n                                        <a ng-click="closeCategories()" ng-href="{{\'#/\' + currentItem.id + \'-\' + v.id + \'/\' + currentItem.title + \'/\' + v.name}}" class="more-button{{v.promoted ? \' promoted\' : \'\'}}"><span>More Info</span></a>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="row actions">\r\n                                <div class="col-md-4">\r\n                                    <button class="map-button">View on map</button>\r\n                                </div>\r\n                                <div class="col-md-4 no-padding">\r\n                                    <button class="wishlist-button">Add to wishlist</button>\r\n                                </div>\r\n                                <div class="col-md-4">\r\n                                    <button class="book-button">Book now</button>\r\n                                </div>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <button class="close-button">&nbsp;</button>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="search-results-pane-wrapper-1 pane-wrapper{{showCategorySearchBlock && showCategoriesSearchBlockMap ? \' collapsed\' : \'\'}}">\r\n        <div class="search-results-pane-1 pane">\r\n            <div id="mapFrame">\r\n                <my-map ng-if="showCategorySearchBlock"></my-map>\r\n            </div>\r\n            <button class="close-button">&nbsp;</button>\r\n        </div>\r\n    </div>\r\n</div>'),
a.put("templates/directives/categoryHover.html",'<div class="info-pane-wrapper pane-wrapper{{showCategoryBlock ? \' collapsed\' : \'\'}}">\r\n    <div class="info-pane pane{{sideCategory.content ? \'preloader\' : \'\'}}">\r\n        <div class="top-pane" ng-if="sideCategory.img" ng-attr-style="{{sideCategory.img ? \'background-image: url(\' + mediaUrl + sideCategory.img + \');\' : \'\'}}"></div>\r\n        <div class="main-pane" style="overflow: hidden; width: auto; height: {{ sideCategory.img ? \'560px\' : \'855px\'}};">\r\n            <div class="row heading">\r\n                <div class="col-md-12">\r\n                    <h2 class="title">{{sideCategory.title}}</h2>\r\n                </div>\r\n            </div>\r\n            <div class="row heading">\r\n                <div class="col-md-12">\r\n                    <div class="content">\r\n                        <div ng-if="sideCategory.content" ng-bind-html="sideCategory.content | rawHtml"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <button ng-click="closeCategory()" class="back-button">&nbsp;</button>\r\n    </div>\r\n</div>'),a.put("templates/directives/objectBlock.html",'<div class="info-pane-wrapper-1 pane-wrapper{{showObjectBlock ? \' collapsed\' : \'\'}}">\r\n    <div class="info-pane-1 pane">\r\n        <div class="top-pane" ng-if="sideObject.content_image" ng-attr-style="background-image: url({{ sideObject.content_image }});"></div>\r\n        <div class="main-pane" ng-attr-style="{{ sideObject.content_image ? \'margin-top: -70px;position: relative\' : \'margin-top: 50px;\' }}">\r\n            <div class="row heading">\r\n                <div class="col-md-12">\r\n                    <h2 ng-attr-style="{{ sideObject.content_image ? \'\' : \'color:black !important\' }}" class="title">{{ sideObject.title }}</h2>\r\n                    <h3 ng-attr-style="{{ sideObject.content_image ? \'\' : \'color:black !important\' }}" class="occupation">{{ sideObject.occupation }}</h3>\r\n                </div>\r\n            </div>\r\n            <hr />\r\n            <div class="row actions actions-pane">\r\n                <div class="col-md-4"><button class="wishlist-button">Add to wishlist</button></div>\r\n                <div class="col-md-4"><button class="book-button">Book</button></div>\r\n                <div class="col-md-4"><button class="map-button"></button></div>\r\n            </div>\r\n            <hr />\r\n            <div class="row content-pane">\r\n                <div class="col-md-12">\r\n                    <div class="content" ng-show="sideObject.content" ng-bind-html="sideObject.content | rawHtml"></div>\r\n                </div>\r\n            </div>\r\n            <hr />\r\n            <div class="row sub-heading">\r\n                <div class="col-md-12">\r\n                    <h3>Contact Info</h3><hr />\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row contact">\r\n                <div class="col-md-5">\r\n                    <span class="phone">{{ sideObject.phone }}</span><br />\r\n                    <span class="email">{{ sideObject.email }}</span>\r\n                </div>\r\n                <div class="col-md-7">\r\n                    <span class="address">{{ sideObject.address_street + \' \' + sideObject.address_city }}</span><br />\r\n                    <span class="french_speakers">{{ sideObject.french_speakers }}</span>\r\n                </div>\r\n            </div>\r\n            <div class="row sub-heading">\r\n                <div class="col-md-12">\r\n                    <h3>More Info</h3><hr />\r\n                </div>\r\n            </div>\r\n            <div class="row contact">\r\n                <div class="col-md-4">\r\n                </div>\r\n                <div class="col-md-4">\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <button ng-click="back()" class="back-button" ng-attr-style="{{ sideObject.content_image ? \'\' : \'color:black\'}}">Back to list view</button>\r\n        <button ng-click="closeObject()" class="close-button" style="cursor: pointer">&nbsp;</button>\r\n    </div>\r\n</div>\r\n'),a.put("templates/directives/searchBlock.html",'<div class="searchBlock {{showSearchBlock ? \' display\' : \'\'}}">\r\n    <div class="search-criteria-pane pane">\r\n        <h2 ng-show="center_search_result.count" class="title">{{center_search_result.count}} Search results for <span class="criteria">{{search}}</span></h2>\r\n        <h2 ng-show="!center_search_result.count && keywords.length" class="title">No results for <span class="criteria">{{keywords}}</span></h2>\r\n        <h2 ng-show="!center_search_result.count && !keywords.length" class="title">Please type something to start</h2>\r\n        <button class="close-button" style="position: absolute; right: 0; top: 0;">x</button>\r\n        <div class="info-content">\r\n            <div ng-repeat="(catID, catData) in center_search_result.data" class="category">\r\n                <a ng-href="{{\'#/\' + catID + \'/\' + catData.name + \'/search/\' + keywords}}">\r\n                    <h3>{{catData.title}}</h3>\r\n\r\n                    <div class="count">\r\n                        {{catData.itemsCount}} results\r\n                    </div>\r\n                </a>\r\n                <div class="items">\r\n                    <ul>\r\n                        <li ng-repeat="item in catData.items">\r\n                            <div class="content">\r\n'+"                                <a ng-href=\"{{'#/' + catID + '-' + item.id + '/' + catData.name + '/' + item.name}}\">\r\n                                    <h4>{{item.title | cut:true:35:' ...'}}</h4>\r\n                                </a>\r\n                                <p class=\"excerpt\" ng-if=\"item.excerpt\" ng-bind-html=\"item.excerpt | cut:true:150:' ...' | rawHtml\"></p>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n"),a.put("templates/home/index.html",'<div nf-if="0">\n    <div ng-if="parentID == 0">\n        <a ng-href="{{ siteUrl }}">\n            Go Home\n        </a>\n    </div>\n    <div ng-if="parentID != 0 && parentID != null">\n        <a ng-href="{{ siteUrl }}/category/{{ parentID }}">\n            Back to parent Category\n        </a>\n    </div>\n    <div ng-repeat="(k, v) in currentCategories">\n        <a ng-if="v.items_count" ng-href="{{ siteUrl }}category/{{ v.id }}">\n            {{ v.id }} => {{ v.title }}\n        </a>\n        <div ng-if="!v.items_count">\n            {{ v.id }} => {{ v.title }}\n        </div>\n    </div>\n</div>\n<div id="demo">\n    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-2 -2 504 504" id="menu">\n        <style>\n            #menu {\n                display: block;\n                margin: 0 auto;\n                /*overflow: visible;*/ /* uncomment this if you are using bouncing animations*/\n            }\n\n            a {\n                cursor: pointer; /* SVG &lt;a&gt; elements don\'t get this by default, so you need to explicitly set it */\n                outline: none;\n                font-weight: bold;\n                font-size: 17px;\n            }\n\n            /* You can change these default styles any way you want */\n\n            .item .sector {\n                transition: all .1s linear;\n                fill: #fff;\n                stroke: transparent;\n                opacity: 0.8;\n            }\n\n\n            .item:hover .sector, .item:focus .sector {\n                fill: #fff;\n                opacity: 0.6;\n            }\n\n            .menu-trigger {\n                fill: #fff;\n                stroke: transparent;\n                opacity: 1;\n                pointer-events: auto; /* KEEP THIS to make sure it stays clickable even when SVG\'s pointer events is disabled */\n            }\n\n            .menu-trigger:hover, .menu-trigger:focus {\n                cursor: pointer;\n            }\n            symbol {\n                overflow: visible; /* KEEP THIS so that text will not get cut off it it is wider than the icon width */\n            }\n        </style>\n        <g id="trigger" class="trigger menu-trigger" role="button">\n            <circle cx="250" cy="250" r="110" />\n            <!-- menu button label or icon goes here -->\n        </g>\n        <g id="itemsContainer">\n            <!-- the menu items -->\n        </g>\n        <g id="symbolsContainer">\n            <!-- replace the contents of these symbols with the contents of your icons -->\n        </g>\n    </svg>\n</div>')}]);